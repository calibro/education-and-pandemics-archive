(this["webpackJsonpische-pandemic-archive"]=this["webpackJsonpische-pandemic-archive"]||[]).push([[0],{124:function(e,t,s){},125:function(e,t,s){},126:function(e,t,s){},176:function(e,t){},177:function(e,t){},253:function(e,t,s){},259:function(e,t,s){},260:function(e,t,s){},261:function(e,t,s){},262:function(e,t,s){},266:function(e,t,s){},267:function(e,t,s){},281:function(e,t,s){},285:function(e,t,s){"use strict";s.r(t);var r=s(0),a=s.n(r),i=s(17),c=s.n(i),n=(s(124),s(9)),l=s(10),o=s(13),u=s(12),d=(s(125),s(126),s(22)),m=s.n(d),h=s(11),j=s(119),b=(s(253),s(3)),f=s(1),p=function(e){var t=e.item,s=e.flick,r=Object(b.f)();return Object(f.jsxs)("div",{onClick:function(){s&&s.current.isPlaying()||r.push("/explore/resource/"+t.id)},className:"resource-card",children:[t.fields.Attachments&&t.fields.Attachments.length>0&&Object(f.jsx)("img",{src:t.fields.Attachments[0].url,alt:t.fields["Title ID"]}),Object(f.jsx)("div",{className:"card-title",children:t.fields["Title ID"]}),t.fields.Pandemic_name&&Object(f.jsx)("div",{className:"card-badge",children:t.fields.Pandemic_name.join(",")})]})},A=(s(259),function(e){var t=e.items,s=r.createRef();return Object(f.jsxs)("div",{className:"resource-slider",children:[Object(f.jsx)("div",{className:"fade-left"}),Object(f.jsx)(j.a,{tag:"div",viewportTag:"div",cameraTag:"div",classPrefix:"eg-flick",deceleration:.0075,horizontal:!0,circular:!0,infiniteThreshold:0,lastIndex:1/0,threshold:40,duration:100,panelEffect:function(e){return 1-Math.pow(1-e,3)},defaultIndex:0,inputType:["touch","mouse"],bounce:10,autoResize:!1,zIndex:2,bound:!1,overflow:!1,hanger:"50%",gap:0,moveType:{type:"snap",count:1},collectStatistics:!0,ref:s,children:t.map((function(e){return Object(f.jsx)(p,{item:e,flick:s})}))}),Object(f.jsx)("div",{className:"fade-right"})]})}),v=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(n.a)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={archiveItems:[],loading:!1},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;e.setState({loading:!0}),new m.a({apiKey:"key8p1ipk3FEGppuA"}).base("appyRkLfkVtG84rMU")("Data Sample").select({view:"Grid view"}).firstPage((function(t,s){t?console.error(t):e.setState({archiveItems:s,loading:!1})}))}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:"home-view",children:[Object(f.jsxs)("div",{className:"top-content",children:[Object(f.jsxs)("div",{className:"logo-block",children:[Object(f.jsxs)("h1",{children:["Education & Pandemic ",Object(f.jsx)("span",{children:"Archive"})]}),"Web Archive on Educations and Pandemics: Past and Present"]}),Object(f.jsxs)("div",{className:"about-block",children:["Short introduction and mission web archive. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",Object(f.jsxs)("div",{className:"home-links",children:[Object(f.jsx)(h.b,{to:"/explore",className:"home-link",children:"Explore"}),Object(f.jsx)(h.b,{to:"/about",className:"home-link",children:"About"}),Object(f.jsx)("a",{href:"#",className:"home-link",children:"Sumbit"})]})]})]}),Object(f.jsxs)("div",{className:"latest-content",children:[Object(f.jsx)("div",{className:"latest-title",children:"Latest updates"}),this.state.archiveItems.length>0&&!this.state.loading?Object(f.jsx)(A,{items:this.state.archiveItems}):null]})]})}}]),s}(r.Component),O=(s(260),s(291));var g=s(45),y=s.n(g),x=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(n.a)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={resource:{},relatedResources:[]},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=new m.a({apiKey:"key8p1ipk3FEGppuA"}).base("appyRkLfkVtG84rMU");t("Data Sample").find(this.props.resourceId,(function(s,r){s?console.error(s):(e.setState({resource:r}),t("Data Sample").select({view:"Grid view",filterByFormula:'FIND("'+r.fields.Type_name+'",{Type})'}).firstPage((function(t,s){t?console.error(t):e.setState({relatedResources:s})})))}))}},{key:"generateEmbedCode",value:function(){var e,t,s=Object(f.jsx)("div",{});try{e=new URL(this.state.resource.fields.URL)}catch(n){s=Object(f.jsx)("div",{children:"No url is defined"})}if(e)if(e.hostname.includes("youtu")){var r=(t=(t=e.href).replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?t[2].split(/[^0-9a-z_\-]/i)[0]:t;s=Object(f.jsx)("iframe",{width:"100%",height:"360",title:"content",src:"https://www.youtube.com/embed/"+r,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})}else if(e.hostname.includes("vimeo")){var a=function(e){var t="",s=e.match(/https:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/);return s&&(t=s[2]),t}(e.href);s=Object(f.jsx)("iframe",{width:"100%",height:"360",title:"content",src:"https://player.vimeo.com/video/"+a,frameborder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:!0})}else if(e.hostname.includes("archive.org")){var i=function(e){return e.replace("details","embed")}(e.href);s=Object(f.jsx)("iframe",{width:"100%",height:"360",title:"content",src:i,frameborder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:!0})}else if(e.hostname.includes("spotify")){var c=function(e){var t=new URL(e);return t.origin+"/embed/"+t.pathname}(e.href);s=Object(f.jsx)("iframe",{width:"100%",height:"360",title:"content",src:c,frameborder:"0",allowtransparency:"true",allow:"encrypted-media"})}else e.hostname.includes("soundcloud")&&(s=Object(f.jsx)("iframe",{width:"100%",height:"300",title:"content",scrolling:"no",frameborder:"no",allow:"autoplay",src:"https://w.soundcloud.com/player/?url="+encodeURIComponent(e.href)+"&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"}));return s}},{key:"resourceMedia",value:function(){var e=Object(f.jsx)("span",{children:"No item format defined"}),t=this.state.resource.fields.item_format;return"Website"===t||"Image"===t?e=Object(f.jsx)("img",{src:this.state.resource.fields.Attachments[0].url,alt:this.state.resource.fields["Title ID"]}):"Embed"===t&&(e=this.generateEmbedCode()),e}},{key:"resourceInfo",value:function(){var e=this,t=[{field:"Pandemic_name",label:"Pandemic"},{field:"Type_name",label:"Type"},{field:"Themes_name",label:"Themes"},{field:"Tags_name",label:"Tags"},{field:"Country_name",label:"Country"},{field:"City_name",label:"City"},{field:"Language_name",label:"Language"},{field:"Credits",label:"Credits"},{field:"Production date",label:"Created",format:function(e){return e?y()(e,"YYYY-MM-DD").format("DD/MM/YYYY"):""}},{field:"Publishing date",label:"Published",format:function(e){return e?y()(e,"YYYY-MM-DD").format("DD/MM/YYYY"):""}},{field:"Added in the archive (YYYY-MM-DD)",label:"Archived",format:function(e){return e?y()(e,"YYYY-MM-DD").format("DD/MM/YYYY"):""}},{field:"Contributor",label:"Contributor"}];return Object(f.jsxs)("div",{className:"resource-sideinfo",children:[Object(f.jsxs)("div",{className:"resource-title",children:[this.state.resource.fields["Title ID"],Object(f.jsx)("div",{className:"bookmark"})]}),Object(f.jsx)("div",{className:"resource-desc",children:this.state.resource.fields["Summary (limit 500)"]}),Object(f.jsx)("div",{className:"resource-metadata",children:t.map((function(t){return Object(f.jsxs)("div",{className:"meta-row",children:[Object(f.jsx)("div",{className:"meta-title",children:t.label}),Object(f.jsx)("div",{className:"meta-value",children:t.format?t.format(e.state.resource.fields[t.field]):Array.isArray(e.state.resource.fields[t.field])?e.state.resource.fields[t.field].join(", "):e.state.resource.fields[t.field]})]},t.field)}))}),this.state.resource.fields.URL&&Object(f.jsx)("div",{className:"resource-source",children:Object(f.jsx)("a",{href:this.state.resource.fields.URL,children:"GO TO THE SOURCE"})})]})}},{key:"relatedResources",value:function(){return this.state.relatedResources.length>0?Object(f.jsx)(A,{items:this.state.relatedResources}):Object(f.jsx)("div",{children:"No related resources"})}},{key:"render",value:function(){return this.state.resource.fields?Object(f.jsxs)("div",{className:"resource-page",children:[Object(f.jsxs)("div",{className:"resource-view",children:[Object(f.jsx)("div",{className:"resource-preview",children:this.resourceMedia()}),Object(f.jsx)("div",{className:"resource-sideinfo-container",children:this.resourceInfo()})]}),Object(f.jsxs)("div",{className:"related-resources",children:[Object(f.jsxs)("div",{className:"related-options",children:["Explore other ",Object(f.jsx)("b",{children:this.state.resource.fields.Type_name})]}),this.relatedResources()]})]}):Object(f.jsxs)("div",{className:"loading",children:[Object(f.jsx)(O.a,{animation:"border"}),"Loading resource"]})}}]),s}(r.Component),w=(s(261),s(262),function(e){var t=e.archiveItems;return Object(f.jsx)("div",{className:"resouce-grid-container",children:t.map((function(e){return Object(f.jsx)(p,{item:e})}))})}),k=s(6),C=s(73),N=(s(266),s(32)),T=s(292),I=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(n.a)(this,s),(r=t.call(this,e)).handleMouseEnter=r.handleMouseEnter.bind(Object(N.a)(r)),r.handleMouseLeave=r.handleMouseLeave.bind(Object(N.a)(r)),r.state={showPopover:!1},r}return Object(l.a)(s,[{key:"handleMouseEnter",value:function(){var e=this,t=this.props,s=t.delay,r=t.onMouseEnter;this.setTimeoutConst=setTimeout((function(){e.setState({showPopover:!0},(function(){r&&r()}))}),s)}},{key:"handleMouseLeave",value:function(){clearTimeout(this.setTimeoutConst),this.setState({showPopover:!1})}},{key:"componentWillUnmount",value:function(){this.setTimeoutConst&&clearTimeout(this.setTimeoutConst)}},{key:"render",value:function(){var e=this,t=this.props,s=t.component,r=t.children,i=t.placement,c=a.a.Children.map(r,(function(t){return a.a.cloneElement(t,{onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,ref:function(s){e._child=s;var r=t.ref;"function"===typeof r&&r(s)}})}))[0];return Object(f.jsxs)(a.a.Fragment,{children:[c,Object(f.jsx)(T.a,{show:this.state.showPopover,placement:i,target:this._child,shouldUpdatePosition:!0,flip:!0,children:s})]})}}]),s}(a.a.Component);I.defaultProps={delay:0};var P=function(e){var t=e.archiveItems,s=a.a.useMemo((function(){return t.map((function(e){return Object(k.a)(Object(k.a)({},e.fields),{},{id:e.id})}))}),[]),r=a.a.useMemo((function(){return[{Header:"Pandemics",accessor:"Pandemic_name",sortType:"basic"},{Header:"Title",accessor:"Title ID",sortType:"basic"},{Header:"Type",accessor:"Type_name",sortType:"basic"},{Header:"Themes",accessor:"Themes_name",sortType:"basic"},{Header:"Tags",accessor:"Tags_name",sortType:"basic"},{Header:"Languages",accessor:"Language_name",sortType:"basic"},{Header:"Contributor",accessor:"Contributor",sortType:"basic"}]}),[]),i=Object(C.useTable)({columns:r,data:s},C.useSortBy),c=i.getTableProps,n=i.getTableBodyProps,l=i.headerGroups,o=i.rows,u=i.prepareRow,d=Object(b.f)();return Object(f.jsxs)("table",Object(k.a)(Object(k.a)({},c()),{},{className:"resource-table",children:[Object(f.jsx)("thead",{children:l.map((function(e){return Object(f.jsx)("tr",Object(k.a)(Object(k.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(f.jsxs)("th",Object(k.a)(Object(k.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),e.isSorted&&Object(f.jsx)("span",{children:Object(f.jsx)("img",{src:e.isSortedDesc?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAKCAYAAACXDi8zAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAABqADAAQAAAABAAAACgAAAABdWr2nAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAAaklEQVQIHa1N2wmAMAzMtXUPR/GznyIU+medzFHqKt3AASSRlAYcwIOQe5EQDeQ1zjqmnRI1ZEIVj2ohuhlwCuHSEkgWPHI4DlSUCHNz4Kacg9u11JG2WHKKZUjqP0x8949BsLsA38zeJL2bKCO4XXydawAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAKCAYAAACXDi8zAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACDSURBVHgBrYwxDoJQEERn9397j2CsjF5CO7Ui0RBLPYlHIXaWlnZyCaMNCfeA/wc2ATo6Jtni7cuMQ5f0dEg26+Xq+yv+xr4XqpyHoBgYI5lQSHo+3rWOD8ywDQFwEXn0uHp70ktGSi5tn8pMa97Eapdkv6CTjw1Lxd3z9S6HTZN2PTe6Lif4Lfk8sgAAAABJRU5ErkJggg==",alt:"arrow sort"})})]}))}))}))}))}),Object(f.jsx)("tbody",Object(k.a)(Object(k.a)({},n()),{},{children:o.map((function(e){return u(e),Object(f.jsx)(I,{component:e.original.Attachments?Object(f.jsx)("img",{src:e.original.Attachments[0].url,style:{width:"30vw"},alt:e.original["Title ID"]}):Object(f.jsx)("div",{}),placement:"bottom",onMouseEnter:function(){},delay:200,children:Object(f.jsx)("tr",Object(k.a)(Object(k.a)({},e.getRowProps()),{},{onClick:function(){return function(e){d.push("/explore/resource/"+e.original.id)}(e)},children:e.cells.map((function(e){return Object(f.jsx)("td",Object(k.a)(Object(k.a)({},e.getCellProps()),{},{children:Array.isArray(e.value)?e.value.join(", "):e.render("Cell")}))}))}))})}))}))]}))},S=function(e){e.archiveItems;return Object(f.jsx)("div",{children:"Map"})},R=(s(267),s(23)),E=s(7),M=function(e){var t=Object(E.d)(e.filterName,E.a),s=Object(R.a)(t,2),r=s[0],a=s[1],i=r||[];return Object(f.jsx)("div",{className:"filter-list",children:e.filterItems.map((function(t){var s=t.fields[e.labelBy],r=i.includes(s);return Object(f.jsxs)("label",{className:"filter-list-item ".concat(r?"checked":" "),children:[Object(f.jsx)("div",{className:"circle-checkbox"}),Object(f.jsx)("input",{type:"checkbox",checked:r,value:s,onChange:function(){return e=s,i.includes(e)?i.splice(i.indexOf(e),1):i.push(e),void a(i);var e}}),s," (",t.fields.Count,")"]})}))})},B=function(){var e=Object(E.d)("dateFrom",E.c),t=Object(R.a)(e,2),s=t[0],r=t[1];return Object(f.jsxs)("div",{className:"filter-dates",children:["Select the dates range to refine your search.",Object(f.jsxs)("div",{className:"dates-from",children:[Object(f.jsx)("label",{children:"From"}),Object(f.jsx)("select",{value:s,onChange:function(e){r(e.target.value)}})]})]})},D=s.p+"static/media/arrow.9282adbf.svg",L=function(e){var t=e.open,s=e.width,a=e.children,i=e.title,c=e.onClose,n=r.useRef();!function(e,t){var s=function(s){!e.current||e.current.contains(s.target)||e.current.parentNode.contains(s.target)||t()};r.useEffect((function(){return document.addEventListener("click",s),function(){document.removeEventListener("click",s)}}))}(n,(function(){t&&c()}));var l=t?"".concat(s,"px"):"0px";return Object(f.jsx)(r.Fragment,{children:Object(f.jsxs)("div",{ref:n,className:"secondary-sidebar",style:{left:l,width:"".concat(s,"px")},children:[Object(f.jsxs)("div",{className:"secondary-sidebar-header",children:[Object(f.jsx)("div",{className:"arrow-icon reverse",style:{backgroundImage:"url(".concat(D,")")},onClick:function(){return c()}}),Object(f.jsx)("div",{className:"filter-title",children:i})]}),Object(f.jsx)("div",{className:"secondary-sidebar-content",children:a})]})})},Y=[{key:"pandemics",label:"Pandemics"},{key:"themes",label:"Themes"},{key:"tags",label:"Tags"},{key:"resource_type",label:"Types"},{key:"languages",label:"Languages"},{key:"countries",label:"Countries"},{key:"cities",label:"Cities"},{key:"dates",label:"Dates"}],F=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(n.a)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={showSideMenu:!1,currentFilterPanel:null},e}return Object(l.a)(s,[{key:"setShowSideMenu",value:function(e){this.setState({showSideMenu:e})}},{key:"setFilterPanel",value:function(e){this.setState({currentFilterPanel:e}),e&&this.setShowSideMenu(!0)}},{key:"currentFilterContent",value:function(){switch(this.state.currentFilterPanel){case"pandemics":return Object(f.jsx)(M,{blockTitle:"Pandemics",filterName:"Pandemic",labelBy:"Name",filterItems:this.props.filters.pandemics});case"themes":return Object(f.jsx)(M,{blockTitle:"Themes",filterName:"Themes",labelBy:"Theme",filterItems:this.props.filters.themes});case"resource_type":return Object(f.jsx)(M,{blockTitle:"Resource Type",filterName:"Type",labelBy:"Type",filterItems:this.props.filters.types});case"tags":return Object(f.jsx)(M,{blockTitle:"Tags",filterName:"Tags",labelBy:"Tag",filterItems:this.props.filters.tags});case"languages":return Object(f.jsx)(M,{blockTitle:"Languages",filterName:"Language",labelBy:"Language",filterItems:this.props.filters.languages});case"countries":return Object(f.jsx)(M,{blockTitle:"Countries",filterName:"Country",labelBy:"Country",filterItems:this.props.filters.countries});case"cities":return Object(f.jsx)(M,{blockTitle:"Cities",filterName:"City",labelBy:"City",filterItems:this.props.filters.cities});case"dates":return Object(f.jsx)(B,{});default:return Object(f.jsx)("div",{})}}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"sidebar-container",children:[Object(f.jsxs)("div",{className:"primary-sidebar",children:[Object(f.jsx)("div",{className:"sidebar-title",children:"Filters"}),Y.map((function(t){return Object(f.jsxs)("div",{className:"filter-type ".concat(e.state.currentFilterPanel===t.key?"active":" "),onClick:function(){return e.setFilterPanel(t.key)},children:[t.label,Object(f.jsx)("div",{className:"arrow-icon",style:{backgroundImage:"url(".concat(D,")")}})]})}))]}),Object(f.jsx)(L,{open:this.state.showSideMenu,width:"250",title:this.state.currentFilterPanel?Y.find((function(t){return t.key===e.state.currentFilterPanel})).label:"",onClose:function(){e.setShowSideMenu(!1),e.setFilterPanel(!1)},children:this.currentFilterContent()})]})}}]),s}(r.Component),U=function(e){var t=e.filterKey,s=Object(E.d)(t,E.a),r=Object(R.a)(s,2),a=r[0],i=r[1],c=a||[];return c.map((function(e){return Object(f.jsxs)("div",{className:"filter-recap-item",onClick:function(){return function(e){c.includes(e)&&c.splice(c.indexOf(e),1),i(c)}(e)},children:[e," ",Object(f.jsx)("span",{children:"X"})]})}))},G=function(e){var t=Object(E.d)("search",E.c),s=Object(R.a)(t,2),r=s[0],a=s[1];return Object(f.jsx)("input",{type:"text",placeholder:"search",value:r,onChange:function(e){return t=e.target.value,void a(t);var t}})},W=s.p+"static/media/rectangle.dada3c21.svg",H=s.p+"static/media/rectangle-active.b4287a0a.svg",_=s.p+"static/media/list.c092c90e.svg",V=s.p+"static/media/list-active.5020de5f.svg",X=s.p+"static/media/circle.d4d761f1.svg",J=s.p+"static/media/circle-active.3bfe5508.svg",Q=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(n.a)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={archiveItems:[],loading:!1,currentViewType:"grid"},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){JSON.stringify(e.params)!==JSON.stringify(this.props.params)&&this.fetchData()}},{key:"setCurrentViewType",value:function(e){this.setState({currentViewType:e})}},{key:"fetchData",value:function(){var e=this,t=this;t.setState({loading:!0});var s=new m.a({apiKey:"key8p1ipk3FEGppuA"}).base("appyRkLfkVtG84rMU"),r=[];this.props.params&&Object.keys(this.props.params).forEach((function(t){if("search"===t)r.push('OR(FIND(LOWER("'+e.props.params[t]+'"), LOWER({Summary (limit 500)})), FIND(LOWER("'+e.props.params[t]+'"), LOWER({Title ID})))');else{var s=Array.isArray(e.props.params[t])?e.props.params[t]:[e.props.params[t]];r.push("OR("+s.map((function(e){return'FIND("'+e+'",{'+t+"})"})).join(", ")+")")}}));var a=r.length>0?"AND("+r.join(", ")+")":"";s("Data Sample").select({view:"Grid view",filterByFormula:a}).firstPage((function(e,s){e?console.error(e):t.setState({archiveItems:s,loading:!1})}))}},{key:"renderParamsRecap",value:function(){return Object.keys(this.props.params).map((function(e){return Object(f.jsx)(U,{filterKey:e})}))}},{key:"renderCurrentViewType",value:function(){switch(this.state.currentViewType){case"grid":return Object(f.jsx)(w,{archiveItems:this.state.archiveItems});case"list":return Object(f.jsx)(P,{archiveItems:this.state.archiveItems});case"map":return Object(f.jsx)(S,{archiveItems:this.state.archiveItems});default:return Object(f.jsx)("div",{})}}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"explore-view",children:[Object(f.jsx)("div",{className:"sidebar",children:Object(f.jsx)(F,{filters:this.props.filters})}),Object(f.jsxs)("div",{className:"main-content",children:[Object(f.jsxs)("div",{className:"content-top-bar",children:[Object(f.jsxs)("div",{className:"results-count",children:["Results: ",this.state.archiveItems.length]}),Object(f.jsxs)("div",{className:"results-view-type",children:[Object(f.jsx)("div",{className:"view-type grid",onClick:function(){return e.setCurrentViewType("grid")},style:{backgroundImage:"grid"===this.state.currentViewType?"url(".concat(H,")"):"url(".concat(W,")")}}),Object(f.jsx)("div",{className:"view-type list",onClick:function(){return e.setCurrentViewType("list")},style:{backgroundImage:"list"===this.state.currentViewType?"url(".concat(V,")"):"url(".concat(_,")")}}),Object(f.jsx)("div",{className:"view-type map",onClick:function(){return e.setCurrentViewType("map")},style:{backgroundImage:"map"===this.state.currentViewType?"url(".concat(J,")"):"url(".concat(X,")")}})]}),Object(f.jsx)("div",{className:"results-seach",children:Object(f.jsx)(G,{})})]}),Object(f.jsx)("div",{className:"content-filters-summary",children:this.props.params&&this.renderParamsRecap()}),this.state.loading?Object(f.jsxs)("div",{className:"loading",children:[Object(f.jsx)(O.a,{animation:"border"}),"Loading resources"]}):this.renderCurrentViewType()]})]})}}]),s}(r.Component),z=s.p+"static/media/logo.65b2bc4b.svg",Z=(s(281),function(){return Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(h.b,{to:"/",children:Object(f.jsx)("img",{src:z,alt:"logo"})}),Object(f.jsxs)("div",{className:"header-links",children:[Object(f.jsx)(h.b,{to:"/explore",className:"header-link",children:"Explore"}),Object(f.jsx)(h.b,{to:"/about",className:"header-link",children:"About"}),Object(f.jsx)("a",{href:"#",className:"header-link",children:"Sumbit"})]})]})}),K=s(118),q=s.n(K),$=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(n.a)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={types:[],pandemics:[],languages:[],tags:[],countries:[],themes:[],cities:[]},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=new m.a({apiKey:"key8p1ipk3FEGppuA"}).base("appyRkLfkVtG84rMU");t("Type list").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,s){t?console.error(t):e.setState({types:s})})),t("Pandemic list").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,s){t?console.error(t):e.setState({pandemics:s})})),t("Language list").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,s){t?console.error(t):e.setState({languages:s})})),t("Tag list").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,s){t?console.error(t):e.setState({tags:s})})),t("Countries List").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,s){t?console.error(t):e.setState({countries:s})})),t("Themes list").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,s){t?console.error(t):e.setState({themes:s})})),t("Location List").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,s){t?console.error(t):e.setState({cities:s})}))}},{key:"render",value:function(){var e=this;return Object(f.jsx)(E.b,{ReactRouterRoute:b.a,children:Object(f.jsxs)("div",{className:"App",children:["/"!==this.props.location.pathname?Object(f.jsx)(Z,{}):null,Object(f.jsx)("div",{className:"app-content",children:Object(f.jsxs)(b.c,{children:[Object(f.jsx)(b.a,{exact:!0,path:"/explore/resource/:resourceId",render:function(e){return Object(f.jsx)(x,{resourceId:e.match.params.resourceId})}}),Object(f.jsx)(b.a,{path:"/explore",render:function(t){var s=q.a.parse(t.location.search.slice(1));return Object(f.jsx)(Q,{filters:e.state,params:s})}}),Object(f.jsx)(b.a,{path:"/",render:function(){return Object(f.jsx)(v,{})}})]})})]})})}}]),s}(r.Component),ee=Object(b.g)($),te=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,293)).then((function(t){var s=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;s(e),r(e),a(e),i(e),c(e)}))};s(284);c.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(h.a,{children:Object(f.jsx)(ee,{})})}),document.getElementById("root")),te()}},[[285,1,2]]]);
//# sourceMappingURL=main.38d845f7.chunk.js.map