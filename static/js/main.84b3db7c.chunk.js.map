{"version":3,"sources":["assets/resource-placeholder-doc.svg","components/ResourceCard.jsx","components/ResourcesSlider.jsx","views/HomeView.jsx","utils/collection.js","assets/collection-add.svg","assets/collection-active.svg","components/ResourceExtendedInfo.jsx","components/RelatedResources.jsx","views/ResourceView.jsx","utils/embed.js","components/ResourcesGrid.jsx","components/PopoverStickOnHover.jsx","components/ResourcesList.jsx","assets/arrow-up.png","assets/arrow-down.png","components/maps/layers.js","components/maps/CountriesMap.jsx","components/maps/LocationsMap.jsx","components/ResourcesMap.jsx","components/FilterBlock.jsx","components/FilterDates.jsx","assets/arrow.svg","components/FilterSecondarySidebar.jsx","assets/reset-icon.svg","components/FilterSidebar.jsx","components/CurrentFiltersRecap.jsx","components/FilterSearch.jsx","assets/rectangle.svg","assets/rectangle-active.svg","assets/list.svg","assets/list-active.svg","assets/circle.svg","assets/circle-active.svg","views/ExploreView.jsx","views/AboutView.jsx","views/CollectionView.jsx","assets/logo.svg","assets/collection.svg","assets/collection-full.svg","components/Header.jsx","App.js","reportWebVitals.js","index.js"],"names":["ResourceCard","item","flick","history","useHistory","resourceImage","fields","Attachments","length","thumbnails","large","url","docPlaceholder","onClick","current","isPlaying","push","id","className","style","backgroundImage","Pandemic_name","join","ResourcesSlider","items","React","tag","viewportTag","cameraTag","classPrefix","deceleration","horizontal","circular","infiniteThreshold","lastIndex","Infinity","threshold","duration","panelEffect","x","Math","pow","defaultIndex","inputType","bounce","autoResize","zIndex","bound","overflow","hanger","gap","moveType","type","count","collectStatistics","ref","map","HomeView","state","archiveItems","loading","this","fetchData","self","setState","Airtable","apiKey","process","base","select","view","firstPage","err","records","console","error","to","href","Spinner","animation","Component","CollectionContext","useCollectionState","createPersistedState","useCollection","context","Error","CollectionProvider","props","collection","setCollection","value","Provider","ResourceExtendedInfo","resource","infoFields","field","label","format","v","moment","CollectionAction","isInCollection","find","c","collectionCopy","JSON","parse","stringify","splice","findIndex","collectionIconSaved","collectionIconAdd","info","Array","isArray","RelatedResources","useState","relatedResources","setRelatedResources","setLoading","themesOptions","t","activeThemeOption","setActiveThemeOption","useEffect","formula","filterByFormula","classNamePrefix","options","onChange","isSearchable","theme","colors","primary","neutral0","primary25","ResourceView","resourceId","setResource","viewRef","createRef","scrollTo","record","generateEmbedCode","source","code","URL","hostname","includes","youtubeId","replace","split","width","height","title","src","frameBorder","allow","allowFullScreen","vimeoId","ID","match","embedUtils","archiveUrl","spotifyUrl","params","origin","pathname","allowtransparency","scrolling","encodeURIComponent","ResourceMedia","resourceContent","alt","ResourcesGrid","PopoverStickOnHover","handleMouseEnter","bind","handleMouseLeave","showPopover","delay","onMouseEnter","setTimeoutConst","setTimeout","clearTimeout","component","children","placement","child","Children","cloneElement","onMouseLeave","node","_child","Fragment","Overlay","show","target","shouldUpdatePosition","flip","defaultProps","ResourcesList","data","useMemo","i","columns","Header","accessor","sortType","tableInstance","useTable","useSortBy","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","getSortByToggleProps","render","isSorted","isSortedDesc","row","original","getRowProps","handleClick","cells","cell","getCellProps","clusterLayer","filter","paint","clusterCountLayer","layout","unclusteredPointLayer","ghostPoints","countriesLayer","CountriesMap","onUpdate","zoom","viewport","setViewport","itemsWithCountry","countriesGeoJSON","countriesWithData","_","uniq","countries","features","f","makeCountrGeoJSON","onTransitionEnd","event","visibleCountryIds","queryRenderedFeatures","layer","onViewportChange","nextViewport","interactiveLayerIds","LocationsMap","itemsWithLocation","locationsGeoJSON","properties","geometry","coordinates","visibleResIds","cluster","clusterMaxZoom","clusterRadius","ResourcesMap","mapType","setMapType","filteredItems","setFilteredItems","name","checked","FilterBlock","useQueryParam","filterName","ArrayParam","setFilterValue","paramsArray","filterItems","val","labelBy","isSelected","indexOf","FilterDates","NumberParam","startDate","setStartDate","endDate","setEndDate","selected","date","Date","UTC","getUTCFullYear","getUTCMonth","undefined","onChangeStart","dateFormat","placeholderText","showMonthYearPicker","onChangeEnd","FilterSecondarySidebar","open","onClose","clickRef","callback","e","contains","parentNode","document","addEventListener","removeEventListener","useClickOutside","left","arrow","filtersList","key","showSideMenu","currentFilterPanel","setShowSideMenu","blockTitle","filters","pandemics","themes","types","tags","languages","cities","setFilterPanel","arrowIcon","currentFilterContent","ResetFilter","resetIcon","CurrentFiltersRecap","filterKey","displayValue","isValid","onRemove","FilterSeach","StringParam","seachQ","placeholder","ExploreView","currentViewType","prevProps","formulas","Object","keys","forEach","paramKey","filterVal","setCurrentViewType","rectIconActive","rectIcon","listIconActive","listIcon","circleIconActive","circleIcon","FilterSearch","renderParamsRecap","renderCurrentViewType","CollectionView","csvData","Papa","filename","CollectionCount","collectionIconFull","collectionIcon","logo","mapboxgl","workerClass","require","default","App","ReactRouterRoute","Route","location","exact","path","urlParams","qs","search","slice","withRouter","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.84b3db7c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/resource-placeholder-doc.9441732c.svg\";","import './ResourceCard.sass';\nimport { useHistory } from \"react-router-dom\";\n\nimport docPlaceholder from '../assets/resource-placeholder-doc.svg';\n\nconst ResourceCard = ({item, flick}) => {\n\n  const history = useHistory();\n\n  function handleClick() {\n    if(!flick || !flick.current.isPlaying()) {\n      history.push(\"/explore/resource/\" + item.id);\n    }\n  }\n  \n  const resourceImage = item.fields.Attachments && item.fields.Attachments.length > 0 ? item.fields.Attachments[0].thumbnails.large.url : docPlaceholder\n\n  return (\n    <div onClick={handleClick} className=\"resource-card\">\n        <div className=\"thumb\" style={{backgroundImage: `url(${resourceImage})`}}></div>\n        <div className=\"card-title\">{item.fields['Title ID']}</div>\n\n        {item.fields.Pandemic_name && (\n            <div className=\"card-badge\">{item.fields.Pandemic_name.join(',')}</div>\n        )}\n    </div>\n  )\n}\n\nexport default ResourceCard","import * as React from 'react';\nimport Flicking from \"@egjs/react-flicking\";\nimport ResourceCard from './ResourceCard'\nimport './ResourcesSlider.sass';\n \n\nconst ResourcesSlider = ({items}) => {\n  let flick =  React.createRef();\n\n  return (\n      <div className=\"resource-slider\">\n        <div className=\"fade-left\"></div>\n        <Flicking\n            tag = \"div\"\n            viewportTag = \"div\"\n            cameraTag = \"div\"\n            classPrefix = \"eg-flick\"\n            deceleration = {0.0075}\n            horizontal = {true}\n            circular = {true}\n            infiniteThreshold = {0}\n            lastIndex = {Infinity}\n            threshold = {40}\n            duration = {100}\n            panelEffect = {x => 1 - Math.pow(1 - x, 3)}\n            defaultIndex = {0}\n            inputType = {[\"touch\", \"mouse\"]}\n            bounce = {10}\n            autoResize = {false}\n            zIndex = {2}\n            bound = {false}\n            overflow = {false}\n            hanger = {\"50%\"}\n            gap = {0}\n            moveType = {{type: \"snap\", count: 1}}\n            collectStatistics = {true}\n            ref={flick}\n          >\n            {items.map(item =>\n              <ResourceCard item={item} flick={flick} key={item.id}></ResourceCard>\n            )}\n        </Flicking>\n        <div className=\"fade-right\"></div>\n      </div>\n      \n  );\n};\n\nexport default ResourcesSlider;","import {Component} from 'react'\nimport './HomeView.sass';\nimport Airtable from 'airtable'\nimport {Link} from 'react-router-dom'\nimport ResourcesSlider from '../components/ResourcesSlider'\nimport {Spinner} from 'react-bootstrap'\n\nexport default class HomeView extends Component {\n  state = {\n\t\tarchiveItems: [],\n    loading: false\n\t}\n  componentDidMount() {\n    this.fetchData()\n  }\n  fetchData () {\n    var self = this\n    self.setState({\n      loading: true\n    });\n\t\tvar base = new Airtable({\n\t\t\tapiKey:process.env.REACT_APP_AIRTABLE_API_KEY\n\t\t}).base('appyRkLfkVtG84rMU');\n\n    //OR(RECORD_ID() = ‘recRjdJSziwMjfhO8’, RECORD_ID() = ‘recdRonUzKAIMPOxb’)\n    base('Data Sample').select({\n        view: 'Grid view',\n    }).firstPage(function(err, records) {\n        if (err) { console.error(err); return; }\n        self.setState({\n\t\t\t\t\tarchiveItems: records,\n          loading: false\n\t\t\t\t});\n    })\n  }\n  render() {\n    return <div className=\"home-view\">\n            <div className=\"top-content\">\n              <div className=\"logo-block\">\n                <h1>Education & Pandemic <span>Archive</span></h1>\n                Web Archive on Educations and Pandemics: Past and Present\n              </div>\n              <div className=\"about-block\">\n                Short introduction and mission web archive. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. \n                <div className=\"home-links\">\n                    <Link to=\"/explore\" className=\"home-link\">Explore</Link>\n                    <Link to=\"/about\" className=\"home-link\">About</Link>\n                    <a href=\"#\" className=\"home-link\">Submit</a>\n                </div>\n              </div>\n            </div>\n            <div className=\"latest-content\">\n              <div className=\"latest-title\">Latest updates</div>\n              {this.state.loading ? \n                <div className=\"loading\"><Spinner animation=\"border\" />Loading resources</div>\n                :\n                (this.state.archiveItems.length > 0 ? \n                  <ResourcesSlider items={this.state.archiveItems}></ResourcesSlider>\n                  : \n                  <div>No resources</div>\n                )\n              }\n            </div>\n          </div>\n  }\n}","import * as React from 'react'\nimport createPersistedState from 'use-persisted-state';\n\nconst CollectionContext = React.createContext()\n\nconst useCollectionState = createPersistedState('collection');\n\nfunction useCollection() {\n  const context = React.useContext(CollectionContext)\n  if (!context) {\n    throw new Error(`useCount must be used within a CollectionContext`)\n  }\n  return context\n}\nfunction CollectionProvider(props) {\n  const [collection, setCollection] = useCollectionState([])\n  const value = React.useMemo(() => [collection, setCollection], [collection])\n  return <CollectionContext.Provider value={value} {...props} />\n}\nexport {CollectionProvider, useCollection}\n\n/*\nexport function getCollection() {\n  let collection = JSON.parse(localStorage.getItem(STORAGE_KEY)) \n  return collection ? collection.items : []\n}\n\nexport function addToCollection(item) {\n  var collection = {};\n  var items = []\n  collection.items = items;\n  if (localStorage.getItem(STORAGE_KEY)) {\n    collection = JSON.parse(localStorage.getItem(STORAGE_KEY))\n  }\n  collection.items.push(item)\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(collection))\n}\n\nexport function removeFromCollection(item) {\n  // TODO\n}\n*/","export default __webpack_public_path__ + \"static/media/collection-add.d1a65b09.svg\";","export default __webpack_public_path__ + \"static/media/collection-active.88e6f50a.svg\";","import './ResourceExtendedInfo.sass';\nimport {useCollection} from '../utils/collection'\nimport moment from 'moment'\n\nimport collectionIconAdd from '../assets/collection-add.svg';\nimport collectionIconSaved from '../assets/collection-active.svg';\n\nconst ResourceExtendedInfo = ({resource}) => {\n\n  let infoFields = [{\n    field: 'Pandemic_name',\n    label: 'Pandemic'\n    },\n    {\n    field: 'Type_name',\n    label: 'Type'\n    },\n    {\n    field: 'Themes_name',\n    label: 'Themes'\n    },\n    {\n    field: 'Tags_name',\n    label: 'Tags'\n    },\n    {\n    field: 'Country_name',\n    label: 'Country'\n    },\n    {\n    field: 'Location_name',\n    label: 'Location'\n    },\n    {\n    field: 'Language_name',\n    label: 'Language'\n    },\n    {\n    field: 'Credits',\n    label: 'Credits'\n    },\n    {\n    field: 'Production date',\n    label: 'Created',\n    format: (v) => v ? moment(v, \"YYYY-MM-DD\").format('DD/MM/YYYY') : ''\n    },\n    {\n    field: 'Publishing date',\n    label: 'Published',\n    format: (v) => v ? moment(v, \"YYYY-MM-DD\").format('DD/MM/YYYY') : ''\n    },\n    {\n    field: 'Added in the archive (YYYY-MM-DD)',\n    label: 'Archived',\n    format: (v) => v ? moment(v, \"YYYY-MM-DD\").format('DD/MM/YYYY') : ''\n    },\n    {\n    field: 'Contributor',\n    label: 'Contributor'\n    }]\n  \n  const CollectionAction = () => {\n    const [collection, setCollection] = useCollection()\n    \n    const toggleFromCollection = () => {\n      setCollection(c => {\n        let collectionCopy = JSON.parse(JSON.stringify(c));\n\n        if (collectionCopy.find(item => item.id == resource.id)) {\n          collectionCopy.splice(collectionCopy.findIndex(item => item.id == resource.id), 1)\n        } else {\n          collectionCopy.push({\n            id: resource.id,\n            fields: resource.fields\n          })\n        }\n        return collectionCopy\n      })\n    }\n    const isInCollection = collection.find(item => item.id === resource.id)\n    return <div className=\"collection-icon\" \n                onClick={toggleFromCollection}\n                style={{ backgroundImage: !isInCollection ? `url(${collectionIconAdd})`: `url(${collectionIconSaved})` }}>\n            </div>\n  }\n  return <div className=\"resource-extended-info\">\n            <div className=\"resource-title\">\n              {resource.fields['Title ID']}\n              <CollectionAction/>\n            </div>\n            <div className=\"resource-desc\">\n              {resource.fields['Summary (limit 500)']}\n            </div>\n            <div className=\"resource-metadata\">\n              {infoFields.map(info => {\n                return <div className=\"meta-row\" key={info.field}>\n                  <div className=\"meta-title\">{info.label}</div>\n                  <div className=\"meta-value\">{\n                    info.format ? info.format(resource.fields[info.field]) : (\n                      Array.isArray(resource.fields[info.field]) ? resource.fields[info.field].join(', ') : resource.fields[info.field]\n                    )}\n                  </div>\n                </div>\n                }\n              )}\n            </div>\n            {resource.fields['URL'] && <div className=\"resource-source\">\n              <a href={resource.fields['URL']}>GO TO THE SOURCE</a>\n            </div>\n            }\n\n        </div>\n}\n\n\nexport default ResourceExtendedInfo","import React, { useEffect, useState } from \"react\";\nimport Airtable from 'airtable'\nimport ResourcesSlider from '../components/ResourcesSlider'\nimport {Spinner} from 'react-bootstrap'\n\nimport Select from 'react-select'\n\n\nconst RelatedResources = ({resource}) => {\n  const [relatedResources, setRelatedResources] = useState([]);\n  const [loading, setLoading] = useState(false)\n\n  const themesOptions = (resource.fields && resource.fields['Themes_name'])? resource.fields['Themes_name'].map(t => {\n    return { value: t, label: t }\n  }) : []\n\n  const [activeThemeOption, setActiveThemeOption] = useState(themesOptions[0]);\n\n  useEffect(() => {\n    setLoading(true)\n    var base = new Airtable({\n      apiKey:process.env.REACT_APP_AIRTABLE_API_KEY\n    }).base('appyRkLfkVtG84rMU');\n\n    let formula = ''\n    if (activeThemeOption) {\n      formula = 'AND(FIND(\"'+resource.fields['Type_name']+'\",{Type}), FIND(\"'+activeThemeOption.value+'\",{Themes}))'\n    } else {\n      formula = 'FIND(\"'+resource.fields['Type_name']+'\",{Type})'\n    }\n\n    base('Data Sample').select({\n      view: 'Grid view',\n      filterByFormula: formula\n    }).firstPage(function(err, records) {\n        if (err) { console.error(err); return; }\n        setRelatedResources(records)\n        setLoading(false)\n    })\n  }, [activeThemeOption])\n\n  \n\n  return (\n    <div className=\"related-resources-panel\">\n      <div className=\"related-options\">\n        <span>Explore other</span><strong>{resource.fields['Type_name']}</strong><span>in theme</span>\n        <Select classNamePrefix=\"custom-select\" \n          options={themesOptions} \n          onChange={setActiveThemeOption}\n          value={activeThemeOption}\n          isSearchable={false}\n          theme={theme => ({\n            ...theme,\n            colors: {\n              ...theme.colors,\n              primary: '#F3EFE6',\n              neutral0: '#FFFFF',\n              primary25: '#FBFAF7'\n            },\n          })}/>\n      </div>\n      {loading ? \n        <div className=\"loading\"><Spinner animation=\"border\" />Loading resources</div>\n      :\n      (relatedResources.length > 0 ? \n        <ResourcesSlider items={relatedResources}></ResourcesSlider> \n        : \n        <div>No related resources</div>\n      )\n      }\n    </div>\n  )\n}\n\nexport default RelatedResources","import React, { useEffect, useState } from \"react\";\nimport './ResourceView.sass';\nimport Airtable from 'airtable'\nimport {Spinner} from 'react-bootstrap'\nimport * as embedUtils from '../utils/embed'\nimport ResourceExtendedInfo from '../components/ResourceExtendedInfo'\nimport RelatedResources from '../components/RelatedResources'\n\n\nconst ResourceView = ({resourceId}) => {\n  const [resource, setResource] = useState({});\n  let viewRef = React.createRef()\n\n  useEffect(() => {\n    viewRef.current && viewRef.current.scrollTo(0, 0)\n    setResource({})\n    var base = new Airtable({\n      apiKey:process.env.REACT_APP_AIRTABLE_API_KEY\n    }).base('appyRkLfkVtG84rMU');\n    \n    base('Data Sample').find(resourceId, function(err, record) {\n      if (err) { console.error(err); return; }\n      setResource(record)\n    })\n  }, [resourceId])\n\n  const generateEmbedCode = () => {\n    let code = <div></div>\n    let source\n    try {\n      source = new URL(resource.fields['URL'])\n    } catch (err) {\n      code = <div>No url is defined</div>\n    }\n    if (source){\n      // YouTube\n      if (source.hostname.includes('youtu')) {\n        let youtubeId = embedUtils.getYoutubeId(source.href)\n        code = <iframe width=\"100%\" height=\"360\"  title=\"content\" src={'https://www.youtube.com/embed/' + youtubeId} frameBorder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen></iframe>\n      }\n\n      // VIMEO\n      else if (source.hostname.includes('vimeo')) {\n        let vimeoId = embedUtils.getVimeoId(source.href)\n        code = <iframe width=\"100%\" height=\"360\" title=\"content\" src={\"https://player.vimeo.com/video/\" + vimeoId} frameBorder=\"0\" allow=\"autoplay; fullscreen; picture-in-picture\" allowFullScreen></iframe>\n      }\n\n      // Archive\n      else if (source.hostname.includes('archive.org')) {\n        let archiveUrl = embedUtils.getArchiveURL(source.href)\n        code = <iframe width=\"100%\" height=\"360\" title=\"content\" src={archiveUrl} frameBorder=\"0\" allow=\"autoplay; fullscreen; picture-in-picture\" allowFullScreen></iframe>\n      }\n\n      // Spotify\n      else if (source.hostname.includes('spotify')) {\n        let spotifyUrl = embedUtils.getSpotifyUrl(source.href)\n        code = <iframe width=\"100%\" height=\"360\" title=\"content\" src={spotifyUrl} frameBorder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\"></iframe>\n      }\n      // Soundcloud\n      else if (source.hostname.includes('soundcloud')) {\n        code = <iframe width=\"100%\" height=\"300\" title=\"content\" scrolling=\"no\" frameBorder=\"no\" allow=\"autoplay\" src={'https://w.soundcloud.com/player/?url=' + encodeURIComponent(source.href) + '&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true'}></iframe>\n      }\n    }\n\n    return code\n  }\n\n  const ResourceMedia = () => {\n    let resourceContent = <span>No item format defined</span>\n    let format = resource.fields['item_format']\n    if (format === 'Website') {\n      resourceContent = <img src={resource.fields['Attachments'][0].url} alt={resource.fields['Title ID']}></img>\n    } \n    else if (format === 'Image') {\n      // Here maybe a gallery?\n      resourceContent = <img src={resource.fields['Attachments'][0].url} alt={resource.fields['Title ID']}></img>\n    }\n    else if (format === 'Embed') {\n      // Here maybe a gallery?\n      resourceContent = generateEmbedCode()\n    }\n    return resourceContent\n  }\n  \n  return resource.fields ? \n    (\n    <div className=\"resource-page\" ref={viewRef}>\n      <div className=\"resource-view\">\n        <div className=\"resource-preview\">\n          <ResourceMedia></ResourceMedia>\n        </div>\n        <div className=\"resource-sideinfo-container\">\n          <ResourceExtendedInfo resource={resource}></ResourceExtendedInfo>\n        </div>\n      </div>\n      <div className=\"related-resources\">\n        <RelatedResources resource={resource}></RelatedResources>\n      </div>\n    </div>\n    )\n  :\n  (<div className=\"loading\"><Spinner animation=\"border\" />Loading resource</div>)\n}\n\nexport default ResourceView","export function getYoutubeId(url) {\n  var ID = '';\n  url = url.replace(/(>|<)/gi,'').split(/(vi\\/|v=|\\/v\\/|youtu\\.be\\/|\\/embed\\/)/)\n  if(url[2]) {\n    ID = url[2].split(/[^0-9a-z_\\-]/i)\n    ID = ID[0]\n  }\n  else {\n    ID = url\n  }\n  return ID\n}\n\nexport function getVimeoId (url) {\n  var ID = '';\n  var regExp = /https:\\/\\/(www\\.)?vimeo.com\\/(\\d+)($|\\/)/;\n  var match = url.match(regExp);\n  if (match){\n    ID = match[2]\n  }\n  return ID\n}\n\nexport function getArchiveURL (url) {\n  return url.replace('details','embed')\n}\n\nexport function getSpotifyUrl(url) {\n  //TODO: Not always is \"embed\", check what happens with songs/album/podcasts\n  let params = new URL(url)\n  return params.origin + '/embed/' + params.pathname\n}\n\n","import ResourceCard from '../components/ResourceCard'\nimport './ResourcesGrid.sass';\n\nconst ResourcesGrid = ({archiveItems}) => {\n\n  return (\n    <div className=\"resouce-grid-container\">\n      {archiveItems.map((item) => (\n          <ResourceCard item={item} key={item.id}></ResourceCard>\n      ))}\n    </div>\n  )\n}\n\nexport default ResourcesGrid\n","/*\n* Usage:\n* <PopoverStickOnHover\n*    component={<div>Holy guacamole! I'm Sticky.</div>}\n*    placement=\"top\"\n*    onMouseEnter={() => { }}\n*    delay={200}\n* >\n*   <div>Show the sticky tooltip</div>\n* </PopoverStickOnHover>\n*/\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { Overlay } from 'react-bootstrap'\n\nexport default class PopoverStickOnHover extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.handleMouseEnter = this.handleMouseEnter.bind(this)\n    this.handleMouseLeave = this.handleMouseLeave.bind(this)\n\n    this.state = {\n      showPopover: false,\n    }\n  }\n\n  handleMouseEnter() {\n    const { delay, onMouseEnter } = this.props\n\n    this.setTimeoutConst = setTimeout(() => {\n      this.setState({ showPopover: true }, () => {\n        if (onMouseEnter) {\n          onMouseEnter()\n        }\n      })\n    }, delay);\n  }\n\n  handleMouseLeave() {\n    clearTimeout(this.setTimeoutConst)\n    this.setState({ showPopover: false })\n  }\n\n  componentWillUnmount() {\n    if (this.setTimeoutConst) {\n      clearTimeout(this.setTimeoutConst)\n    }\n  }\n\n  render() {\n    let { component, children, placement } = this.props\n\n    const child = React.Children.map(children, (child) => (\n      React.cloneElement(child, {\n        onMouseEnter: this.handleMouseEnter,\n        onMouseLeave: this.handleMouseLeave,\n        ref: (node) => {\n          this._child = node\n          const { ref } = child\n          if (typeof ref === 'function') {\n            ref(node);\n          }\n        }\n      })\n    ))[0]\n\n    return(\n      <React.Fragment>\n        {child}\n        <Overlay\n          show={this.state.showPopover}\n          placement={placement}\n          target={this._child}\n          shouldUpdatePosition={true}\n          flip={true}\n        >\n          \n          {component}\n        </Overlay>\n      </React.Fragment>\n    )\n  }\n}\n\nPopoverStickOnHover.defaultProps = {\n  delay: 0\n}\n\nPopoverStickOnHover.propTypes = {\n  delay: PropTypes.number,\n  onMouseEnter: PropTypes.func,\n  children: PropTypes.element.isRequired,\n  component: PropTypes.node.isRequired\n}","import React from 'react';\nimport { useTable, useSortBy } from 'react-table'\nimport arrowDown from '../assets/arrow-down.png';\nimport arrowUp from '../assets/arrow-up.png';\nimport './ResourcesList.sass';\nimport { useHistory } from \"react-router-dom\";\n\nimport PopoverStickOnHover from './PopoverStickOnHover'\n\nconst ResourcesList = ({archiveItems}) => {\n  const data = React.useMemo(\n    () => archiveItems.map(i => {\n      return {\n        ...i.fields,\n        id: i.id\n      }\n    }),\n    []\n  )\n\n  const columns = React.useMemo(\n    () => [\n      {\n        Header: 'Pandemics',\n        accessor: 'Pandemic_name',\n        sortType: 'basic'\n      },\n      {\n        Header: 'Title',\n        accessor: 'Title ID',\n        sortType: 'basic'\n      },\n      {\n        Header: 'Type',\n        accessor: 'Type_name',\n        sortType: 'basic'\n      },\n      {\n        Header: 'Themes',\n        accessor: 'Themes_name',\n        sortType: 'basic'\n      },\n      {\n        Header: 'Tags',\n        accessor: 'Tags_name',\n        sortType: 'basic'\n      },\n      {\n        Header: 'Languages',\n        accessor: 'Language_name',\n        sortType: 'basic'\n      },\n      {\n        Header: 'Contributor',\n        accessor: 'Contributor',\n        sortType: 'basic'\n      },\n    ],\n    []\n  )\n\n  const tableInstance = useTable({ columns, data },useSortBy)\n \n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow,\n  } = tableInstance\n  \n\n  let history = useHistory();\n  const handleClick = (row) => {\n    history.push(\"/explore/resource/\"+row.original.id);\n  }\n\n  return (\n    // apply the table props\n    <table {...getTableProps()} className=\"resource-table\">\n      <thead>\n        {// Loop over the header rows\n        headerGroups.map(headerGroup => (\n          // Apply the header row props\n          <tr {...headerGroup.getHeaderGroupProps()}>\n            {// Loop over the headers in each row\n            headerGroup.headers.map(column => (\n              // Apply the header cell props\n              <th {...column.getHeaderProps(column.getSortByToggleProps())}>\n                {// Render the header\n                column.render('Header')}\n                {column.isSorted && (<span>\n                  <img src={\n                    (column.isSortedDesc ? arrowUp : arrowDown)\n                  }\n                  alt=\"arrow sort\"\n                  />\n                </span>\n                )}\n              </th>\n            ))}\n          </tr>\n        ))}\n      </thead>\n      {/* Apply the table body props */}\n      <tbody {...getTableBodyProps()}>\n        {// Loop over the table rows\n        rows.map(row => {\n          // Prepare the row for display\n          prepareRow(row)\n          return (\n            // Apply the row props\n            <PopoverStickOnHover\n              component={row.original.Attachments ? <img src={row.original.Attachments[0].url} style={{width: '30vw'}} alt={row.original['Title ID']}/> : <div></div>}\n              placement=\"bottom\"\n              onMouseEnter={() => { }}\n              delay={200}\n            >\n              <tr {...row.getRowProps()} onClick={() => handleClick(row)}>\n              {// Loop over the rows cells\n              row.cells.map(cell => {\n                // Apply the cell props\n                return (\n                  <td {...cell.getCellProps()}>\n                    {// Render the cell contents\n                    Array.isArray(cell.value) ? cell.value.join(', ') : cell.render('Cell')\n                    //cell.render('Cell')\n                    }\n                  </td>\n                )\n              })}\n            </tr>\n          </PopoverStickOnHover>\n          )\n        })}\n      </tbody>\n    </table>\n  )\n}\n\nexport default ResourcesList\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAKCAYAAACXDi8zAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAABqADAAQAAAABAAAACgAAAABdWr2nAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAAaklEQVQIHa1N2wmAMAzMtXUPR/GznyIU+medzFHqKt3AASSRlAYcwIOQe5EQDeQ1zjqmnRI1ZEIVj2ohuhlwCuHSEkgWPHI4DlSUCHNz4Kacg9u11JG2WHKKZUjqP0x8949BsLsA38zeJL2bKCO4XXydawAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAKCAYAAACXDi8zAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACDSURBVHgBrYwxDoJQEERn9397j2CsjF5CO7Ui0RBLPYlHIXaWlnZyCaMNCfeA/wc2ATo6Jtni7cuMQ5f0dEg26+Xq+yv+xr4XqpyHoBgYI5lQSHo+3rWOD8ywDQFwEXn0uHp70ktGSi5tn8pMa97Eapdkv6CTjw1Lxd3z9S6HTZN2PTe6Lif4Lfk8sgAAAABJRU5ErkJggg==\"","export const clusterLayer = {\n  id: 'clusters',\n  type: 'circle',\n  source: 'locations-cluster',\n  filter: ['has', 'point_count'],\n  paint: {\n    'circle-color': '#B87333',\n    'circle-radius': ['step', ['get', 'point_count'], 20, 100, 30, 750, 40]\n  }\n};\n\nexport const clusterCountLayer = {\n  id: 'cluster-count',\n  type: 'symbol',\n  source: 'locations-cluster',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': 12,\n  },\n  paint: {\n    \"text-color\": \"#ffffff\"\n  }\n};\n\nexport const unclusteredPointLayer = {\n  id: 'unclustered-point',\n  type: 'circle',\n  source: 'locations-cluster',\n  filter: ['!', ['has', 'point_count']],\n  paint: {\n    'circle-color': '#B87333',\n    'circle-radius': 10\n  }\n};\n\nexport const ghostPoints = {\n  id: 'ghost-points',\n  type: 'circle',\n  source: 'locations',\n  paint: {\n    'circle-color': '#B87333',\n    'circle-radius': 0\n  }\n};\n\nexport const countriesLayer = {\n  id: 'data',\n  type: 'fill',\n  paint: {\n    'fill-color': '#B87333',\n    'fill-opacity': 0.8\n  }\n};","import * as React from 'react';\nimport { useState, useMemo } from 'react';\n\nimport ReactMapGL, {Source, Layer} from 'react-map-gl';\nimport _ from \"lodash\";\nimport {countriesLayer} from './layers';\nimport countries from '../../assets/geojson/countries.geo.json'\n\nfunction makeCountrGeoJSON(items) {\n  const countriesWithData = _.uniq(items.map(i => i.fields['Country_a3'][0]))\n  return {\n    ...countries,\n    features: countries.features.filter(f => countriesWithData.includes(f.id))\n  }\n}\n\n\nfunction CountriesMap({archiveItems, onUpdate}) {\n  let map =  React.createRef();\n\n  const [viewport, setViewport] = useState({\n    width: '100%',\n    height: '100%',\n    zoom: 1\n  });\n\n  const itemsWithCountry = archiveItems.filter(i => i.fields['Country'])\n  \n  const onMapMove = event => {\n    if(map.current){\n      var features =  map.current.queryRenderedFeatures()\n      let visibleCountryIds = features.filter(f=> f.layer.id == countriesLayer.id).map(f => f.id)\n      //TO FIX\n      onUpdate(itemsWithCountry.filter(i => visibleCountryIds.includes(i.fields['Country_a3'][0])))\n    }\n  }\n\n  const countriesGeoJSON = useMemo(() => makeCountrGeoJSON(itemsWithCountry), itemsWithCountry)\n\n  return <ReactMapGL\n            ref={map}\n            {...viewport}\n            onTransitionEnd={onMapMove}\n            onViewportChange={nextViewport => setViewport(nextViewport)}\n            interactiveLayerIds={[countriesLayer.id]}\n          >\n            <Source id=\"countries\" type=\"geojson\"\n              data={countriesGeoJSON}>\n              <Layer {...countriesLayer} />\n            </Source>\n        </ReactMapGL>\n}\n\nexport default CountriesMap\n","import * as React from 'react';\nimport { useState, useMemo } from 'react';\n\nimport ReactMapGL, {Source, Layer} from 'react-map-gl';\nimport _ from \"lodash\";\nimport {clusterLayer, clusterCountLayer, unclusteredPointLayer, ghostPoints} from './layers';\n\nfunction makeLocationsGeoJSON(items) {\n  return {\n    type: 'FeatureCollection',\n    features: items.map(item => {\n      return {\n        type: 'Feature',\n        properties: {\n          id: item.id,\n          type: 'resource'\n        },\n        geometry: {type: 'Point', coordinates: [item.fields['Location_long'][0], item.fields['Location_lat'][0]]}}\n    })\n  }\n}\n\nfunction LocationsMap({archiveItems, onUpdate}) {\n  let map =  React.createRef();\n\n  const [viewport, setViewport] = useState({\n    width: '100%',\n    height: '100%',\n    zoom: 1\n  });\n\n  const itemsWithLocation = archiveItems.filter(i => i.fields['Location'] && i.fields['Location_long'][0] && i.fields['Location_lat'][0])\n  \n  const onMapMove = event => {\n    if(map.current){\n      var features =  map.current.queryRenderedFeatures()\n      let visibleResIds = features.filter(f=> f.layer.id == ghostPoints.id).map(f => f.properties.id)\n      onUpdate(itemsWithLocation.filter(i => visibleResIds.includes(i.id)))\n    }\n  }\n\n  const locationsGeoJSON = useMemo(() => makeLocationsGeoJSON(itemsWithLocation), itemsWithLocation)\n\n  //map.current && map.current.on('move', onMapMove)\n  return (\n        <ReactMapGL\n          ref={map}\n          {...viewport}\n          onTransitionEnd={onMapMove}\n          onViewportChange={nextViewport => setViewport(nextViewport)}\n          interactiveLayerIds={[ghostPoints.id]}\n        >\n          <Source id=\"locations-cluster\" type=\"geojson\"\n              data={locationsGeoJSON}\n              cluster={true}\n              clusterMaxZoom={14}\n              clusterRadius={50}\n            >\n              <Layer {...clusterLayer} />\n              <Layer {...clusterCountLayer} />\n              <Layer {...unclusteredPointLayer} />\n            </Source>\n            <Source id=\"locations\" type=\"geojson\"\n              data={locationsGeoJSON}>\n              <Layer {...ghostPoints} />\n            </Source>\n        </ReactMapGL>\n  )\n}\n\nexport default LocationsMap\n","import * as React from 'react';\nimport { useState, useMemo } from 'react';\nimport ReactMapGL, {Source, Layer} from 'react-map-gl';\nimport './ResourcesMap.sass';\nimport ResourcesGrid from './ResourcesGrid';\nimport CountriesMap from './maps/CountriesMap';\nimport LocationsMap from './maps/LocationsMap';\n\nfunction ResourcesMap({archiveItems}) {\n\n  const [mapType, setMapType] = useState('countries');\n  const [filteredItems, setFilteredItems] = useState(archiveItems);\n\n  //map.current && map.current.on('move', onMapMove)\n  return (\n    <div className=\"resource-map\">\n      <div className=\"map-container\">\n        {mapType == 'locations' && (\n          <LocationsMap archiveItems={archiveItems} onUpdate={setFilteredItems}></LocationsMap>\n        )}\n        {mapType == 'countries' && (\n          <CountriesMap archiveItems={archiveItems} onUpdate={setFilteredItems}></CountriesMap>\n          )\n        }\n      </div>\n      <div className=\"map-sidebar\">\n        <div className=\"map-options\">\n          Map view \n          <label>\n            <input\n              type=\"radio\"\n              name=\"map-type-option\"\n              value=\"countries\"\n              checked={mapType === 'countries'}\n              onChange={() => setMapType('countries')}\n              className=\"map-option-input\"\n            />\n            COUNTRIES\n          </label>\n          <label>\n            <input\n              type=\"radio\"\n              name=\"map-type-option\"\n              value=\"locations\"\n              checked={mapType === 'locations'}\n              onChange={() => setMapType('locations')}\n              className=\"map-option-input\"\n            />\n            LOCATIONS\n          </label>\n        </div>\n        <div className=\"resource-list\">\n          <ResourcesGrid archiveItems={filteredItems}></ResourcesGrid>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ResourcesMap\n","import * as React from 'react';\nimport { useQueryParam, ArrayParam } from 'use-query-params';\n\nconst FilterBlock = (props) => {\n  const [params, setFilterValue] = useQueryParam(props.filterName, ArrayParam);\n\n  const paramsArray = params || []\n\n  const onChange = (value) => {\n    if(paramsArray.includes(value)){\n      paramsArray.splice(paramsArray.indexOf(value), 1)\n    } else {\n      paramsArray.push(value)\n    }\n    setFilterValue(paramsArray)\n  }\n\n  return (\n    <div className=\"filter-list\">\n        {props.filterItems.map(filter =>{\n          const val = filter.fields[props.labelBy]\n          const isSelected = paramsArray.includes(val)\n           return (\n             <label className={`filter-list-item ${isSelected ? \"checked\" : \" \"}`}>\n              <div className=\"circle-checkbox\"></div>\n              <input type=\"checkbox\"\n                checked={isSelected} \n                value={val} \n                onChange={() => onChange(val)}\n                ></input>\n                {val} ({filter.fields['Count']})\n             </label>\n           )\n        })}\n    </div>\n  );\n};\n\nexport default FilterBlock;","import * as React from 'react';\nimport { useQueryParam, StringParam, NumberParam } from 'use-query-params';\nimport Select from 'react-select'\nimport DatePicker from 'react-datepicker'\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nconst FilterDates = () => {\n  const [startDate, setStartDate] = useQueryParam('dateFrom', NumberParam);\n  const [endDate, setEndDate] = useQueryParam('dateTo', NumberParam);\n\n\n  const onChangeStart = (date) => {\n    let v = date? Date.UTC(date.getUTCFullYear(), date.getUTCMonth()) : undefined\n    setStartDate(v)\n  }\n  const onChangeEnd = (date) => {\n    let v = date? Date.UTC(date.getUTCFullYear(), date.getUTCMonth()) : undefined\n    setEndDate(v)\n  }\n\n  return (\n    <div className=\"filter-dates\">\n      Select the dates range to refine your search.\n      <div className=\"date-input dates-from\">\n        <label>From</label>\n        <DatePicker\n          selected={startDate}\n          onChange={date => onChangeStart(date)}\n          dateFormat=\"MM/yyyy\"\n          placeholderText=\"Month / Year\"\n          showMonthYearPicker\n        />\n      </div>\n      <div className=\"date-input dates-to\">\n        <label>To</label>\n        <DatePicker\n          selected={endDate}\n          onChange={date => onChangeEnd(date)}\n          dateFormat=\"MM/yyyy\"\n          placeholderText=\"Month / Year\"\n          showMonthYearPicker\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default FilterDates;","export default __webpack_public_path__ + \"static/media/arrow.9282adbf.svg\";","import * as React from 'react';\nimport arrow from '../assets/arrow.svg';\n\nconst useClickOutside = (ref, callback) => {\n  const handleClick = e => {\n    if (ref.current && !ref.current.contains(e.target) && !ref.current.parentNode.contains(e.target) && !e.target.className.includes('react-datepicker')) {\n      callback();\n    }\n  };\n  React.useEffect(() => {\n    document.addEventListener('click', handleClick);\n    return () => {\n      document.removeEventListener('click', handleClick);\n    };\n  });\n};\n\nconst FilterSecondarySidebar = ({open, width, children, title, onClose }) => {\n  const clickRef = React.useRef();\n  useClickOutside(clickRef, () => {open && onClose()});\n\n  const left = open ? `${width}px` : '0px'\n  return (\n    <React.Fragment>\n      <div\n        ref={clickRef}\n        className=\"secondary-sidebar\"\n        style={{\n          left: left,\n          //transform: `translatex(${xPosition}px)`,\n          width: `${width}px`,\n        }}\n      >\n        <div className=\"secondary-sidebar-header\">\n          <div className=\"arrow-icon reverse\" \n            style={{ backgroundImage: `url(${arrow})` }}\n            onClick={() => onClose()}\n            ></div>\n          <div className=\"filter-title\">\n            {title}\n          </div>\n        </div>\n        <div className=\"secondary-sidebar-content\">{children}</div>\n      </div>\n    </React.Fragment>\n  )\n}\n\nexport default FilterSecondarySidebar\n","export default __webpack_public_path__ + \"static/media/reset-icon.1921e3f5.svg\";","import {Component} from 'react'\nimport './FilterSidebar.sass';\nimport { useHistory } from \"react-router-dom\";\n\nimport FilterBlock from './FilterBlock'\nimport FilterDates from './FilterDates'\n\nimport FilterSecondarySidebar from './FilterSecondarySidebar'\nimport arrowIcon from '../assets/arrow.svg';\nimport resetIcon from '../assets/reset-icon.svg';\n\nconst filtersList = [\n  {\n    key: 'pandemics',\n    label: 'Pandemics'\n  },\n  {\n    key: 'themes',\n    label: 'Themes'\n  },\n  {\n    key: 'tags',\n    label: 'Tags'\n  },\n  {\n    key: 'resource_type',\n    label: 'Types'\n  },\n  {\n    key: 'languages',\n    label: 'Languages'\n  },\n  {\n    key: 'countries',\n    label: 'Countries'\n  },\n  {\n    key: 'locations',\n    label: 'Locations'\n  },\n  {\n    key: 'dates',\n    label: 'Dates'\n  }\n]\n\nexport default class ResourceCard extends Component {\n  state = {\n    showSideMenu: false,\n    currentFilterPanel: null\n\t}\n\n  setShowSideMenu(show) {\n    this.setState({\n      showSideMenu: show\n    });\n  }\n\n  setFilterPanel (value) {\n    this.setState({\n      currentFilterPanel: value\n    })\n    value && this.setShowSideMenu(true)\n  }\n\n  currentFilterContent () {\n    switch (this.state.currentFilterPanel) {\n      case 'pandemics':\n        return <FilterBlock blockTitle=\"Pandemics\" filterName=\"Pandemic\" labelBy=\"Name\" filterItems={this.props.filters.pandemics}></FilterBlock>\n      case 'themes':\n        return <FilterBlock blockTitle=\"Themes\" filterName=\"Themes\" labelBy=\"Theme\" filterItems={this.props.filters.themes}></FilterBlock>\n      case 'resource_type':\n        return <FilterBlock blockTitle=\"Resource Type\" filterName=\"Type\" labelBy=\"Type\" filterItems={this.props.filters.types}></FilterBlock>\n      case 'tags':\n        return <FilterBlock blockTitle=\"Tags\" filterName=\"Tags\" labelBy=\"Tag\" filterItems={this.props.filters.tags}></FilterBlock>\n      case 'languages':\n        return <FilterBlock blockTitle=\"Languages\" filterName=\"Language\" labelBy=\"Language\" filterItems={this.props.filters.languages}></FilterBlock>\n      case 'countries':\n        return <FilterBlock blockTitle=\"Countries\" filterName=\"Country\" labelBy=\"Country\" filterItems={this.props.filters.countries}></FilterBlock>\n      case 'locations':\n        return <FilterBlock blockTitle=\"Locations\" filterName=\"Location\" labelBy=\"City\" filterItems={this.props.filters.cities}></FilterBlock>\n      case 'dates':\n        return <FilterDates></FilterDates>\n      default:\n        return <div></div>\n    }\n\n  }\n\n\n  render() {\n    return <div className=\"sidebar-container\">\n        <div className=\"primary-sidebar\">\n          <div className=\"sidebar-title\">Filters</div>\n          {\n          filtersList.map(t =>\n            <div\n              className={`filter-type ${this.state.currentFilterPanel === t.key ? \"active\" : \" \"}`} \n              onClick={() => this.setFilterPanel(t.key)}\n            >\n              {t.label}\n              <div className=\"arrow-icon\" style={{ backgroundImage: `url(${arrowIcon})` }}></div>\n            </div>\n          )\n          }\n          <ResetFilter></ResetFilter>\n        </div>\n        <FilterSecondarySidebar open={this.state.showSideMenu} width=\"250\"\n        title={this.state.currentFilterPanel ? filtersList.find(e => e.key === this.state.currentFilterPanel).label : ''}\n        onClose={() => {\n          this.setShowSideMenu(false)\n          this.setFilterPanel(false)\n        }}\n        children={\n          this.currentFilterContent()\n        }>\n        </FilterSecondarySidebar>\n      </div>\n  }\n}\n\nconst ResetFilter = ({filters}) =>{\n  const history = useHistory();\n\n  function handleClick() {\n    history.push(\"/explore\")\n  }\n\n  return (\n    <div className=\"reset-filter\" onClick={handleClick}>\n      <div className=\"icon\" style={{ backgroundImage: `url(${resetIcon})` }}></div>\n      Reset filter\n    </div>\n    )\n}","import { useQueryParam, ArrayParam } from 'use-query-params';\nimport moment from 'moment'\n\nconst CurrentFiltersRecap = ({filterKey}) => {\n  const [params, setFilterValue] = useQueryParam(filterKey, ArrayParam);\n\n  const paramsArray = params || []\n\n  const onRemove = (value) => {\n    if(paramsArray.includes(value)){\n      paramsArray.splice(paramsArray.indexOf(value), 1)\n    }\n    setFilterValue(paramsArray)\n  }\n\n  return paramsArray.map(value => {\n    let displayValue = value\n    if (filterKey.indexOf('date') >= 0 && moment(+value).isValid()) {\n      displayValue = moment(+value).format('MM/YYYY')\n    }\n    return <div className=\"filter-recap-item\" onClick={() => onRemove(value)}>{displayValue} <span>X</span></div>\n  }\n  )\n}\n\nexport default CurrentFiltersRecap;","import * as React from 'react';\nimport { useQueryParam, StringParam } from 'use-query-params';\n\nconst FilterSeach = (props) => {\n  const [seachQ, setFilterValue] = useQueryParam('search', StringParam);\n\n\n  const onChange = (value) => {\n    setFilterValue(value)\n  }\n\n  return (\n    <input type=\"text\" \n      placeholder=\"search\" value={seachQ}\n      onChange={(e) => onChange(e.target.value)}></input>\n  );\n};\n\nexport default FilterSeach;","export default __webpack_public_path__ + \"static/media/rectangle.dada3c21.svg\";","export default __webpack_public_path__ + \"static/media/rectangle-active.b4287a0a.svg\";","export default __webpack_public_path__ + \"static/media/list.c092c90e.svg\";","export default __webpack_public_path__ + \"static/media/list-active.5020de5f.svg\";","export default __webpack_public_path__ + \"static/media/circle.d4d761f1.svg\";","export default __webpack_public_path__ + \"static/media/circle-active.3bfe5508.svg\";","import {Component} from 'react'\nimport './ExploreView.sass';\nimport {Spinner} from 'react-bootstrap'\nimport ResourcesGrid from '../components/ResourcesGrid'\nimport ResourcesList from '../components/ResourcesList'\nimport ResourcesMap from '../components/ResourcesMap'\n\nimport FilterSidebar from '../components/FilterSidebar'\nimport CurrentFiltersRecap from '../components/CurrentFiltersRecap'\nimport Airtable from 'airtable'\nimport FilterSearch from '../components/FilterSearch'\nimport rectIcon from '../assets/rectangle.svg';\nimport rectIconActive from '../assets/rectangle-active.svg';\nimport listIcon from '../assets/list.svg';\nimport listIconActive from '../assets/list-active.svg';\nimport circleIcon from '../assets/circle.svg';\nimport circleIconActive from '../assets/circle-active.svg';\nimport moment from 'moment';\n\n\n\nexport default class ExploreView extends Component {\n  state = {\n\t\tarchiveItems: [],\n    loading: false,\n    currentViewType: 'grid'\n\t}\n  componentDidMount() {\n    this.fetchData()\n  }\n  componentDidUpdate(prevProps) {\n    if (JSON.stringify(prevProps.params) !== JSON.stringify(this.props.params)) {\n      this.fetchData()\n    }\n  }\n  setCurrentViewType(type) {\n    this.setState({\n      currentViewType: type\n    })\n  }\n  fetchData () {\n    var self = this\n    self.setState({\n      loading: true\n    });\n\t\tvar base = new Airtable({\n\t\t\tapiKey:process.env.REACT_APP_AIRTABLE_API_KEY\n\t\t}).base('appyRkLfkVtG84rMU');\n\n    let formulas = []\n\n    this.props.params && Object.keys(this.props.params).forEach(paramKey => {\n      if(paramKey === 'search') {\n        formulas.push('OR(FIND(LOWER(\"'+ this.props.params[paramKey] + '\"), LOWER({Summary (limit 500)})), '+\n        'FIND(LOWER(\"'+ this.props.params[paramKey] + '\"), LOWER({Title ID})))')\n\n      } else if(paramKey === 'dateFrom' && moment(+this.props.params[paramKey]).isValid()) {\n        formulas.push('OR(IS_AFTER({Production date}, \"'+moment(+this.props.params[paramKey]).format('YYYY-MM-DD')+'\"))')\n      \n      } else if(paramKey === 'dateTo' && moment(+this.props.params[paramKey]).isValid()) {\n        formulas.push('OR(IS_BEFORE({Production date}, \"'+moment(+this.props.params[paramKey]).format('YYYY-MM-DD')+'\"))')\n      \n      } else {\n        let filterVal = Array.isArray(this.props.params[paramKey]) ? this.props.params[paramKey] : [this.props.params[paramKey]]\n        formulas.push('OR(' + filterVal.map(v => 'FIND(\"'+v+'\",{' + paramKey + '})').join(', ') +')')\n      }\n    })\n    let formula = formulas.length > 0 ? 'AND(' + formulas.join(', ') +')' : ''\n\n    //OR(RECORD_ID() = ‘recRjdJSziwMjfhO8’, RECORD_ID() = ‘recdRonUzKAIMPOxb’)\n    base('Data Sample').select({\n        view: 'Grid view',\n        filterByFormula: formula\n    }).firstPage(function(err, records) {\n        if (err) { console.error(err); return; }\n        self.setState({\n\t\t\t\t\tarchiveItems: records,\n          loading: false\n\t\t\t\t});\n    })\n  }\n  renderParamsRecap () {\n    return Object.keys(this.props.params)\n      .filter(filterKey => filterKey != 'search')\n      .map(filterKey =>\n        <CurrentFiltersRecap filterKey={filterKey}></CurrentFiltersRecap>\n      )\n  }\n  renderCurrentViewType () {\n    switch(this.state.currentViewType) {\n      case 'grid':\n        return <ResourcesGrid archiveItems={this.state.archiveItems}></ResourcesGrid>\n      case 'list':\n        return <ResourcesList archiveItems={this.state.archiveItems}></ResourcesList>\n      case 'map':\n        return <ResourcesMap archiveItems={this.state.archiveItems}></ResourcesMap>\n      default:\n        return <div></div>\n    }\n  }\n  render() {\n    return <div className=\"explore-view\">\n            <div className=\"sidebar\">\n              <FilterSidebar filters={this.props.filters}></FilterSidebar>\n            </div>\n            <div className=\"main-content\">\n              <div className=\"content-top-bar\">\n                <div className=\"results-count\">Results: {this.state.archiveItems.length}</div>\n                <div className=\"results-view-type\">\n                  <div className={`view-type grid`} onClick={() => this.setCurrentViewType('grid')} style={{ backgroundImage: this.state.currentViewType === 'grid' ? `url(${rectIconActive})`: `url(${rectIcon})` }}></div>\n                  <div className={`view-type list`} onClick={() => this.setCurrentViewType('list')} style={{ backgroundImage: this.state.currentViewType === 'list' ? `url(${listIconActive})` : `url(${listIcon})`}}></div>\n                  <div className={`view-type map`} onClick={() => this.setCurrentViewType('map')} style={{ backgroundImage: this.state.currentViewType === 'map' ? `url(${circleIconActive})` : `url(${circleIcon})`}}></div>\n                </div>\n                <div className=\"results-seach\">\n                  <FilterSearch></FilterSearch>\n                </div>\n              </div>\n              <div className=\"content-filters-summary\">\n                {this.props.params && this.renderParamsRecap()}\n              </div>\n              {this.state.loading ? \n                <div className=\"loading\"><Spinner animation=\"border\" />Loading resources</div>\n                  :\n                  this.renderCurrentViewType()\n            }\n            </div>\n          </div>\n  }\n}","import {Component} from 'react'\nimport './AboutView.sass';\n\n\nexport default class HomeView extends Component {\n  render() {\n    return <div className=\"about-view\">\n            about\n          </div>\n  }\n}","import React, { useEffect, useState } from \"react\";\nimport './CollectionView.sass';\nimport {useCollection} from '../utils/collection'\nimport ResourceExtendedInfo from '../components/ResourceExtendedInfo'\nimport { CSVLink } from \"react-csv\";\nimport * as Papa from 'papaparse'\n\nconst CollectionView = () => {\n  const [collection] = useCollection()\n\n  const csvData = Papa.unparse(collection.map(item => item.fields))\n\n  return (\n    <div className=\"collection-view\">\n      <div className=\"collection-header\">\n        <h2>Items Collected</h2>\n        <CSVLink data={csvData} filename={\"ISCHE-collection.csv\"} className=\"export-link\">Export list</CSVLink>\n      </div>\n      <div className=\"collection-grid\">\n      {\n        collection.map(resource =>\n          <ResourceExtendedInfo resource={resource}></ResourceExtendedInfo>\n        )\n      }\n      </div>\n    </div>\n  )\n}\n\nexport default CollectionView","export default __webpack_public_path__ + \"static/media/logo.65b2bc4b.svg\";","export default __webpack_public_path__ + \"static/media/collection.9ba941c0.svg\";","export default __webpack_public_path__ + \"static/media/collection-full.2832ecdb.svg\";","import * as React from 'react';\nimport logo from '../assets/logo.svg';\nimport {Link} from 'react-router-dom'\nimport './Header.sass'\nimport {useCollection} from '../utils/collection'\n\nimport collectionIcon from '../assets/collection.svg';\nimport collectionIconFull from '../assets/collection-full.svg';\n\n\nconst Header = () => {\n  let CollectionCount = () => {\n    const [collection] = useCollection()\n    const count = collection.length\n    return <Link to=\"/collection\" className=\"header-link\">\n              <div className=\"collection-icon\" style={{ backgroundImage: count > 0 ? `url(${collectionIconFull})`: `url(${collectionIcon})` }}></div>\n              {count}\n          </Link>\n  }\n\n  return (\n      <div className=\"header\">\n        <Link to=\"/\"><img src={logo} alt=\"logo\"/></Link>\n        <div className=\"header-links\">\n          <Link to=\"/explore\" className=\"header-link\">Explore</Link>\n          <Link to=\"/about\" className=\"header-link\">About</Link>\n          <a href=\"#\" className=\"header-link\">Submit</a>\n          <CollectionCount />\n        </div>\n      </div>\n  );\n};\n\nexport default Header;","import './App.sass';\nimport './components/CustomSelect.sass';\n\nimport {Component} from 'react'\nimport HomeView from './views/HomeView'\nimport ResourceView from './views/ResourceView'\nimport ExploreView from './views/ExploreView'\nimport AboutView from './views/AboutView'\nimport CollectionView from './views/CollectionView'\n\nimport Header from './components/Header'\nimport {CollectionProvider} from './utils/collection'\n\nimport qs from 'qs'\n\nimport Airtable from 'airtable'\n\nimport mapboxgl from \"mapbox-gl\";\n\nimport {\n  Switch,\n  Route,\n  withRouter,\n  Redirect\n} from \"react-router-dom\";\n\nimport { QueryParamProvider } from 'use-query-params';\n\n// @ts-ignore\n// eslint-disable-next-line import/no-webpack-loader-syntax, import/no-unresolved\nmapboxgl.workerClass = require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\n\n\nclass App extends Component {\n\tstate = {\n\t\ttypes: [],\n    pandemics: [],\n    languages: [],\n    tags: [],\n    countries: [],\n    themes: [],\n    cities: []\n\t}\n  componentDidMount() {\n    var self = this\n\t\tvar base = new Airtable({\n\t\t\tapiKey:process.env.REACT_APP_AIRTABLE_API_KEY\n\t\t}).base('appyRkLfkVtG84rMU');\n\n    base('Type list').select({\n        view: 'Grid view',\n        filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n\t\t\t\t\ttypes: data\n\t\t\t\t});\n    });\n    base('Pandemic list').select({\n        view: 'Grid view',\n        filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          pandemics: data\n        });\n    });\n    base('Language list').select({\n      view: 'Grid view',\n      filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          languages: data\n        });\n    });\n    base('Tag list').select({\n      view: 'Grid view',\n      filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          tags: data\n        });\n    });\n    base('Countries List').select({\n      view: 'Grid view',\n      filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          countries: data\n        });\n    });\n    base('Themes list').select({\n      view: 'Grid view',\n      filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          themes: data\n        });\n    });\n    base('Location List').select({\n      view: 'Grid view',\n      filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          cities: data\n        });\n    });\n  }\n  render() {\n    return (\n        <QueryParamProvider ReactRouterRoute={Route}>\n          <CollectionProvider>\n\n            <div className=\"App\">\n              {\n                this.props.location.pathname !=='/' ? <Header/>:null\n              }\n              <div className=\"app-content\">\n                <Switch>\n                  <Route exact path=\"/explore/resource/:resourceId\" render={(props)=>{\n                    return <ResourceView resourceId={props.match.params.resourceId}/>\n                  }} />\n                  <Route path=\"/explore\" render={(props) => {\n                      let urlParams = qs.parse(props.location.search.slice(1))\n                      return  <ExploreView filters={this.state} params={urlParams}></ExploreView>\n                    }}/>\n                  <Route path=\"/about\" render={() => {\n                      return  <AboutView></AboutView>\n                    }}/>\n                  <Route path=\"/collection\" render={() => {\n                      return  <CollectionView></CollectionView>\n                    }}/>\n                  <Route exact path=\"/\" render={() => {\n                      return  <HomeView></HomeView>\n                    }}/>\n                  <Route path=\"/\">\n                      <Redirect to=\"/\"/>\n                  </Route>\n                </Switch>\n              </div>\n            </div>\n          </CollectionProvider>\n        </QueryParamProvider>\n    );\n  }\n}\n\n\nexport default withRouter(App);\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {HashRouter as Router} from 'react-router-dom'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}