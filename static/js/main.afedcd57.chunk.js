(this["webpackJsonpische-pandemic-archive"]=this["webpackJsonpische-pandemic-archive"]||[]).push([[0],{129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},182:function(e,t){},183:function(e,t){},259:function(e,t,a){},265:function(e,t,a){},266:function(e,t,a){},267:function(e,t,a){},280:function(e,t,a){},281:function(e,t,a){},285:function(e,t,a){},286:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},306:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),i=a(9),c=a.n(i),n=(a(129),a(12)),l=a(13),o=a(15),u=a(14),d=(a(130),a(131),a(132),a(19)),j=a.n(d),m=a(10),b=a(124),h=(a(259),a(5)),f=a(1),p=function(e){var t=e.item,a=e.flick,r=Object(h.g)();return Object(f.jsxs)("div",{onClick:function(){a&&a.current.isPlaying()||r.push("/explore/resource/"+t.id)},className:"resource-card",children:[t.fields.Attachments&&t.fields.Attachments.length>0&&Object(f.jsx)("img",{src:t.fields.Attachments[0].url,alt:t.fields["Title ID"]}),Object(f.jsx)("div",{className:"card-title",children:t.fields["Title ID"]}),t.fields.Pandemic_name&&Object(f.jsx)("div",{className:"card-badge",children:t.fields.Pandemic_name.join(",")})]})},A=(a(265),function(e){var t=e.items,a=r.createRef();return Object(f.jsxs)("div",{className:"resource-slider",children:[Object(f.jsx)("div",{className:"fade-left"}),Object(f.jsx)(b.a,{tag:"div",viewportTag:"div",cameraTag:"div",classPrefix:"eg-flick",deceleration:.0075,horizontal:!0,circular:!0,infiniteThreshold:0,lastIndex:1/0,threshold:40,duration:100,panelEffect:function(e){return 1-Math.pow(1-e,3)},defaultIndex:0,inputType:["touch","mouse"],bounce:10,autoResize:!1,zIndex:2,bound:!1,overflow:!1,hanger:"50%",gap:0,moveType:{type:"snap",count:1},collectStatistics:!0,ref:a,children:t.map((function(e){return Object(f.jsx)(p,{item:e,flick:a},e.id)}))}),Object(f.jsx)("div",{className:"fade-right"})]})}),v=a(311),O=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={archiveItems:[],loading:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;e.setState({loading:!0}),new j.a({apiKey:"key8p1ipk3FEGppuA"}).base("appyRkLfkVtG84rMU")("Data Sample").select({view:"Grid view"}).firstPage((function(t,a){t?console.error(t):e.setState({archiveItems:a,loading:!1})}))}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:"home-view",children:[Object(f.jsxs)("div",{className:"top-content",children:[Object(f.jsxs)("div",{className:"logo-block",children:[Object(f.jsxs)("h1",{children:["Education & Pandemic ",Object(f.jsx)("span",{children:"Archive"})]}),"Web Archive on Educations and Pandemics: Past and Present"]}),Object(f.jsxs)("div",{className:"about-block",children:["Short introduction and mission web archive. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",Object(f.jsxs)("div",{className:"home-links",children:[Object(f.jsx)(m.b,{to:"/explore",className:"home-link",children:"Explore"}),Object(f.jsx)(m.b,{to:"/about",className:"home-link",children:"About"}),Object(f.jsx)("a",{href:"#",className:"home-link",children:"Submit"})]})]})]}),Object(f.jsxs)("div",{className:"latest-content",children:[Object(f.jsx)("div",{className:"latest-title",children:"Latest updates"}),this.state.loading?Object(f.jsxs)("div",{className:"loading",children:[Object(f.jsx)(v.a,{animation:"border"}),"Loading resources"]}):this.state.archiveItems.length>0?Object(f.jsx)(A,{items:this.state.archiveItems}):Object(f.jsx)("div",{children:"No resources"})]})]})}}]),a}(r.Component),g=a(3);a(266);a(267);var x=a(4),y=a(118),w=r.createContext(),N=Object(y.a)("collection");function k(){var e=r.useContext(w);if(!e)throw new Error("useCount must be used within a CollectionContext");return e}function C(e){var t=N([]),a=Object(g.a)(t,2),s=a[0],i=a[1],c=r.useMemo((function(){return[s,i]}),[s]);return Object(f.jsx)(w.Provider,Object(x.a)({value:c},e))}var T=a(48),I=a.n(T),S=a.p+"static/media/collection-add.d1a65b09.svg",P=a.p+"static/media/collection-active.88e6f50a.svg",E=function(e){var t=e.resource,a=[{field:"Pandemic_name",label:"Pandemic"},{field:"Type_name",label:"Type"},{field:"Themes_name",label:"Themes"},{field:"Tags_name",label:"Tags"},{field:"Country_name",label:"Country"},{field:"City_name",label:"City"},{field:"Language_name",label:"Language"},{field:"Credits",label:"Credits"},{field:"Production date",label:"Created",format:function(e){return e?I()(e,"YYYY-MM-DD").format("DD/MM/YYYY"):""}},{field:"Publishing date",label:"Published",format:function(e){return e?I()(e,"YYYY-MM-DD").format("DD/MM/YYYY"):""}},{field:"Added in the archive (YYYY-MM-DD)",label:"Archived",format:function(e){return e?I()(e,"YYYY-MM-DD").format("DD/MM/YYYY"):""}},{field:"Contributor",label:"Contributor"}],r=function(){var e=k(),a=Object(g.a)(e,2),r=a[0],s=a[1],i=r.find((function(e){return e.id===t.id}));return Object(f.jsx)("div",{className:"collection-icon",onClick:function(){s((function(e){var a=JSON.parse(JSON.stringify(e));return a.find((function(e){return e.id==t.id}))?a.splice(a.findIndex((function(e){return e.id==t.id})),1):a.push({id:t.id,fields:t.fields}),a}))},style:{backgroundImage:"url(".concat(i?P:S,")")}})};return Object(f.jsxs)("div",{className:"resource-extended-info",children:[Object(f.jsxs)("div",{className:"resource-title",children:[t.fields["Title ID"],Object(f.jsx)(r,{})]}),Object(f.jsx)("div",{className:"resource-desc",children:t.fields["Summary (limit 500)"]}),Object(f.jsx)("div",{className:"resource-metadata",children:a.map((function(e){return Object(f.jsxs)("div",{className:"meta-row",children:[Object(f.jsx)("div",{className:"meta-title",children:e.label}),Object(f.jsx)("div",{className:"meta-value",children:e.format?e.format(t.fields[e.field]):Array.isArray(t.fields[e.field])?t.fields[e.field].join(", "):t.fields[e.field]})]},e.field)}))}),t.fields.URL&&Object(f.jsx)("div",{className:"resource-source",children:Object(f.jsx)("a",{href:t.fields.URL,children:"GO TO THE SOURCE"})})]})},B=a(75),R=function(e){var t=e.resource,a=Object(r.useState)([]),s=Object(g.a)(a,2),i=s[0],c=s[1],n=Object(r.useState)(!1),l=Object(g.a)(n,2),o=l[0],u=l[1],d=t.fields&&t.fields.Themes_name?t.fields.Themes_name.map((function(e){return{value:e,label:e}})):[],m=Object(r.useState)(d[0]),b=Object(g.a)(m,2),h=b[0],p=b[1];return Object(r.useEffect)((function(){u(!0);var e=new j.a({apiKey:"key8p1ipk3FEGppuA"}).base("appyRkLfkVtG84rMU"),a="";a=h?'AND(FIND("'+t.fields.Type_name+'",{Type}), FIND("'+h.value+'",{Themes}))':'FIND("'+t.fields.Type_name+'",{Type})',e("Data Sample").select({view:"Grid view",filterByFormula:a}).firstPage((function(e,t){e?console.error(e):(c(t),u(!1))}))}),[h]),Object(f.jsxs)("div",{className:"related-resources-panel",children:[Object(f.jsxs)("div",{className:"related-options",children:[Object(f.jsx)("span",{children:"Explore other"}),Object(f.jsx)("strong",{children:t.fields.Type_name}),Object(f.jsx)("span",{children:"in theme"}),Object(f.jsx)(B.a,{classNamePrefix:"custom-select",options:d,onChange:p,value:h,isSearchable:!1,theme:function(e){return Object(x.a)(Object(x.a)({},e),{},{colors:Object(x.a)(Object(x.a)({},e.colors),{},{primary:"#F3EFE6",neutral0:"#FFFFF",primary25:"#FBFAF7"})})}})]}),o?Object(f.jsxs)("div",{className:"loading",children:[Object(f.jsx)(v.a,{animation:"border"}),"Loading resources"]}):i.length>0?Object(f.jsx)(A,{items:i}):Object(f.jsx)("div",{children:"No related resources"})]})},F=function(e){var t=e.resourceId,a=Object(r.useState)({}),i=Object(g.a)(a,2),c=i[0],n=i[1],l=s.a.createRef();Object(r.useEffect)((function(){l.current&&l.current.scrollTo(0,0),n({}),new j.a({apiKey:"key8p1ipk3FEGppuA"}).base("appyRkLfkVtG84rMU")("Data Sample").find(t,(function(e,t){e?console.error(e):n(t)}))}),[t]);var o=function(){var e,t,a=Object(f.jsx)("div",{});try{e=new URL(c.fields.URL)}catch(l){a=Object(f.jsx)("div",{children:"No url is defined"})}if(e)if(e.hostname.includes("youtu")){var r=(t=(t=e.href).replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?t[2].split(/[^0-9a-z_\-]/i)[0]:t;a=Object(f.jsx)("iframe",{width:"100%",height:"360",title:"content",src:"https://www.youtube.com/embed/"+r,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}else if(e.hostname.includes("vimeo")){var s=function(e){var t="",a=e.match(/https:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/);return a&&(t=a[2]),t}(e.href);a=Object(f.jsx)("iframe",{width:"100%",height:"360",title:"content",src:"https://player.vimeo.com/video/"+s,frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})}else if(e.hostname.includes("archive.org")){var i=function(e){return e.replace("details","embed")}(e.href);a=Object(f.jsx)("iframe",{width:"100%",height:"360",title:"content",src:i,frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})}else if(e.hostname.includes("spotify")){var n=function(e){var t=new URL(e);return t.origin+"/embed/"+t.pathname}(e.href);a=Object(f.jsx)("iframe",{width:"100%",height:"360",title:"content",src:n,frameBorder:"0",allowtransparency:"true",allow:"encrypted-media"})}else e.hostname.includes("soundcloud")&&(a=Object(f.jsx)("iframe",{width:"100%",height:"300",title:"content",scrolling:"no",frameBorder:"no",allow:"autoplay",src:"https://w.soundcloud.com/player/?url="+encodeURIComponent(e.href)+"&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"}));return a},u=function(){var e=Object(f.jsx)("span",{children:"No item format defined"}),t=c.fields.item_format;return"Website"===t||"Image"===t?e=Object(f.jsx)("img",{src:c.fields.Attachments[0].url,alt:c.fields["Title ID"]}):"Embed"===t&&(e=o()),e};return c.fields?Object(f.jsxs)("div",{className:"resource-page",ref:l,children:[Object(f.jsxs)("div",{className:"resource-view",children:[Object(f.jsx)("div",{className:"resource-preview",children:Object(f.jsx)(u,{})}),Object(f.jsx)("div",{className:"resource-sideinfo-container",children:Object(f.jsx)(E,{resource:c})})]}),Object(f.jsx)("div",{className:"related-resources",children:Object(f.jsx)(R,{resource:c})})]}):Object(f.jsxs)("div",{className:"loading",children:[Object(f.jsx)(v.a,{animation:"border"}),"Loading resource"]})},L=(a(280),a(281),function(e){var t=e.archiveItems;return Object(f.jsx)("div",{className:"resouce-grid-container",children:t.map((function(e){return Object(f.jsx)(p,{item:e})}))})}),M=a(78),D=(a(285),a(33)),Y=a(312),G=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleMouseEnter=r.handleMouseEnter.bind(Object(D.a)(r)),r.handleMouseLeave=r.handleMouseLeave.bind(Object(D.a)(r)),r.state={showPopover:!1},r}return Object(l.a)(a,[{key:"handleMouseEnter",value:function(){var e=this,t=this.props,a=t.delay,r=t.onMouseEnter;this.setTimeoutConst=setTimeout((function(){e.setState({showPopover:!0},(function(){r&&r()}))}),a)}},{key:"handleMouseLeave",value:function(){clearTimeout(this.setTimeoutConst),this.setState({showPopover:!1})}},{key:"componentWillUnmount",value:function(){this.setTimeoutConst&&clearTimeout(this.setTimeoutConst)}},{key:"render",value:function(){var e=this,t=this.props,a=t.component,r=t.children,i=t.placement,c=s.a.Children.map(r,(function(t){return s.a.cloneElement(t,{onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,ref:function(a){e._child=a;var r=t.ref;"function"===typeof r&&r(a)}})}))[0];return Object(f.jsxs)(s.a.Fragment,{children:[c,Object(f.jsx)(Y.a,{show:this.state.showPopover,placement:i,target:this._child,shouldUpdatePosition:!0,flip:!0,children:a})]})}}]),a}(s.a.Component);G.defaultProps={delay:0};var U=function(e){var t=e.archiveItems,a=s.a.useMemo((function(){return t.map((function(e){return Object(x.a)(Object(x.a)({},e.fields),{},{id:e.id})}))}),[]),r=s.a.useMemo((function(){return[{Header:"Pandemics",accessor:"Pandemic_name",sortType:"basic"},{Header:"Title",accessor:"Title ID",sortType:"basic"},{Header:"Type",accessor:"Type_name",sortType:"basic"},{Header:"Themes",accessor:"Themes_name",sortType:"basic"},{Header:"Tags",accessor:"Tags_name",sortType:"basic"},{Header:"Languages",accessor:"Language_name",sortType:"basic"},{Header:"Contributor",accessor:"Contributor",sortType:"basic"}]}),[]),i=Object(M.useTable)({columns:r,data:a},M.useSortBy),c=i.getTableProps,n=i.getTableBodyProps,l=i.headerGroups,o=i.rows,u=i.prepareRow,d=Object(h.g)();return Object(f.jsxs)("table",Object(x.a)(Object(x.a)({},c()),{},{className:"resource-table",children:[Object(f.jsx)("thead",{children:l.map((function(e){return Object(f.jsx)("tr",Object(x.a)(Object(x.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(f.jsxs)("th",Object(x.a)(Object(x.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),e.isSorted&&Object(f.jsx)("span",{children:Object(f.jsx)("img",{src:e.isSortedDesc?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAKCAYAAACXDi8zAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAABqADAAQAAAABAAAACgAAAABdWr2nAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAAaklEQVQIHa1N2wmAMAzMtXUPR/GznyIU+medzFHqKt3AASSRlAYcwIOQe5EQDeQ1zjqmnRI1ZEIVj2ohuhlwCuHSEkgWPHI4DlSUCHNz4Kacg9u11JG2WHKKZUjqP0x8949BsLsA38zeJL2bKCO4XXydawAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAKCAYAAACXDi8zAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACDSURBVHgBrYwxDoJQEERn9397j2CsjF5CO7Ui0RBLPYlHIXaWlnZyCaMNCfeA/wc2ATo6Jtni7cuMQ5f0dEg26+Xq+yv+xr4XqpyHoBgYI5lQSHo+3rWOD8ywDQFwEXn0uHp70ktGSi5tn8pMa97Eapdkv6CTjw1Lxd3z9S6HTZN2PTe6Lif4Lfk8sgAAAABJRU5ErkJggg==",alt:"arrow sort"})})]}))}))}))}))}),Object(f.jsx)("tbody",Object(x.a)(Object(x.a)({},n()),{},{children:o.map((function(e){return u(e),Object(f.jsx)(G,{component:e.original.Attachments?Object(f.jsx)("img",{src:e.original.Attachments[0].url,style:{width:"30vw"},alt:e.original["Title ID"]}):Object(f.jsx)("div",{}),placement:"bottom",onMouseEnter:function(){},delay:200,children:Object(f.jsx)("tr",Object(x.a)(Object(x.a)({},e.getRowProps()),{},{onClick:function(){return function(e){d.push("/explore/resource/"+e.original.id)}(e)},children:e.cells.map((function(e){return Object(f.jsx)("td",Object(x.a)(Object(x.a)({},e.getCellProps()),{},{children:Array.isArray(e.value)?e.value.join(", "):e.render("Cell")}))}))}))})}))}))]}))},W=function(e){e.archiveItems;return Object(f.jsx)("div",{children:"Map"})},_=(a(286),a(8)),H=function(e){var t=Object(_.d)(e.filterName,_.a),a=Object(g.a)(t,2),r=a[0],s=a[1],i=r||[];return Object(f.jsx)("div",{className:"filter-list",children:e.filterItems.map((function(t){var a=t.fields[e.labelBy],r=i.includes(a);return Object(f.jsxs)("label",{className:"filter-list-item ".concat(r?"checked":" "),children:[Object(f.jsx)("div",{className:"circle-checkbox"}),Object(f.jsx)("input",{type:"checkbox",checked:r,value:a,onChange:function(){return e=a,i.includes(e)?i.splice(i.indexOf(e),1):i.push(e),void s(i);var e}}),a," (",t.fields.Count,")"]})}))})},V=function(){var e=Object(_.d)("dateFrom",_.c),t=Object(g.a)(e,2),a=t[0],r=t[1];return Object(f.jsxs)("div",{className:"filter-dates",children:["Select the dates range to refine your search.",Object(f.jsxs)("div",{className:"dates-from",children:[Object(f.jsx)("label",{children:"From"}),Object(f.jsx)("select",{value:a,onChange:function(e){r(e.target.value)}})]})]})},J=a.p+"static/media/arrow.9282adbf.svg",X=function(e){var t=e.open,a=e.width,s=e.children,i=e.title,c=e.onClose,n=r.useRef();!function(e,t){var a=function(a){!e.current||e.current.contains(a.target)||e.current.parentNode.contains(a.target)||t()};r.useEffect((function(){return document.addEventListener("click",a),function(){document.removeEventListener("click",a)}}))}(n,(function(){t&&c()}));var l=t?"".concat(a,"px"):"0px";return Object(f.jsx)(r.Fragment,{children:Object(f.jsxs)("div",{ref:n,className:"secondary-sidebar",style:{left:l,width:"".concat(a,"px")},children:[Object(f.jsxs)("div",{className:"secondary-sidebar-header",children:[Object(f.jsx)("div",{className:"arrow-icon reverse",style:{backgroundImage:"url(".concat(J,")")},onClick:function(){return c()}}),Object(f.jsx)("div",{className:"filter-title",children:i})]}),Object(f.jsx)("div",{className:"secondary-sidebar-content",children:s})]})})},Q=[{key:"pandemics",label:"Pandemics"},{key:"themes",label:"Themes"},{key:"tags",label:"Tags"},{key:"resource_type",label:"Types"},{key:"languages",label:"Languages"},{key:"countries",label:"Countries"},{key:"cities",label:"Cities"},{key:"dates",label:"Dates"}],z=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={showSideMenu:!1,currentFilterPanel:null},e}return Object(l.a)(a,[{key:"setShowSideMenu",value:function(e){this.setState({showSideMenu:e})}},{key:"setFilterPanel",value:function(e){this.setState({currentFilterPanel:e}),e&&this.setShowSideMenu(!0)}},{key:"currentFilterContent",value:function(){switch(this.state.currentFilterPanel){case"pandemics":return Object(f.jsx)(H,{blockTitle:"Pandemics",filterName:"Pandemic",labelBy:"Name",filterItems:this.props.filters.pandemics});case"themes":return Object(f.jsx)(H,{blockTitle:"Themes",filterName:"Themes",labelBy:"Theme",filterItems:this.props.filters.themes});case"resource_type":return Object(f.jsx)(H,{blockTitle:"Resource Type",filterName:"Type",labelBy:"Type",filterItems:this.props.filters.types});case"tags":return Object(f.jsx)(H,{blockTitle:"Tags",filterName:"Tags",labelBy:"Tag",filterItems:this.props.filters.tags});case"languages":return Object(f.jsx)(H,{blockTitle:"Languages",filterName:"Language",labelBy:"Language",filterItems:this.props.filters.languages});case"countries":return Object(f.jsx)(H,{blockTitle:"Countries",filterName:"Country",labelBy:"Country",filterItems:this.props.filters.countries});case"cities":return Object(f.jsx)(H,{blockTitle:"Cities",filterName:"City",labelBy:"City",filterItems:this.props.filters.cities});case"dates":return Object(f.jsx)(V,{});default:return Object(f.jsx)("div",{})}}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"sidebar-container",children:[Object(f.jsxs)("div",{className:"primary-sidebar",children:[Object(f.jsx)("div",{className:"sidebar-title",children:"Filters"}),Q.map((function(t){return Object(f.jsxs)("div",{className:"filter-type ".concat(e.state.currentFilterPanel===t.key?"active":" "),onClick:function(){return e.setFilterPanel(t.key)},children:[t.label,Object(f.jsx)("div",{className:"arrow-icon",style:{backgroundImage:"url(".concat(J,")")}})]})}))]}),Object(f.jsx)(X,{open:this.state.showSideMenu,width:"250",title:this.state.currentFilterPanel?Q.find((function(t){return t.key===e.state.currentFilterPanel})).label:"",onClose:function(){e.setShowSideMenu(!1),e.setFilterPanel(!1)},children:this.currentFilterContent()})]})}}]),a}(r.Component),K=function(e){var t=e.filterKey,a=Object(_.d)(t,_.a),r=Object(g.a)(a,2),s=r[0],i=r[1],c=s||[];return c.map((function(e){return Object(f.jsxs)("div",{className:"filter-recap-item",onClick:function(){return function(e){c.includes(e)&&c.splice(c.indexOf(e),1),i(c)}(e)},children:[e," ",Object(f.jsx)("span",{children:"X"})]})}))},Z=function(e){var t=Object(_.d)("search",_.c),a=Object(g.a)(t,2),r=a[0],s=a[1];return Object(f.jsx)("input",{type:"text",placeholder:"search",value:r,onChange:function(e){return t=e.target.value,void s(t);var t}})},q=a.p+"static/media/rectangle.dada3c21.svg",$=a.p+"static/media/rectangle-active.b4287a0a.svg",ee=a.p+"static/media/list.c092c90e.svg",te=a.p+"static/media/list-active.5020de5f.svg",ae=a.p+"static/media/circle.d4d761f1.svg",re=a.p+"static/media/circle-active.3bfe5508.svg",se=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={archiveItems:[],loading:!1,currentViewType:"grid"},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){JSON.stringify(e.params)!==JSON.stringify(this.props.params)&&this.fetchData()}},{key:"setCurrentViewType",value:function(e){this.setState({currentViewType:e})}},{key:"fetchData",value:function(){var e=this,t=this;t.setState({loading:!0});var a=new j.a({apiKey:"key8p1ipk3FEGppuA"}).base("appyRkLfkVtG84rMU"),r=[];this.props.params&&Object.keys(this.props.params).forEach((function(t){if("search"===t)r.push('OR(FIND(LOWER("'+e.props.params[t]+'"), LOWER({Summary (limit 500)})), FIND(LOWER("'+e.props.params[t]+'"), LOWER({Title ID})))');else{var a=Array.isArray(e.props.params[t])?e.props.params[t]:[e.props.params[t]];r.push("OR("+a.map((function(e){return'FIND("'+e+'",{'+t+"})"})).join(", ")+")")}}));var s=r.length>0?"AND("+r.join(", ")+")":"";a("Data Sample").select({view:"Grid view",filterByFormula:s}).firstPage((function(e,a){e?console.error(e):t.setState({archiveItems:a,loading:!1})}))}},{key:"renderParamsRecap",value:function(){return Object.keys(this.props.params).filter((function(e){return"search"!=e})).map((function(e){return Object(f.jsx)(K,{filterKey:e})}))}},{key:"renderCurrentViewType",value:function(){switch(this.state.currentViewType){case"grid":return Object(f.jsx)(L,{archiveItems:this.state.archiveItems});case"list":return Object(f.jsx)(U,{archiveItems:this.state.archiveItems});case"map":return Object(f.jsx)(W,{archiveItems:this.state.archiveItems});default:return Object(f.jsx)("div",{})}}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"explore-view",children:[Object(f.jsx)("div",{className:"sidebar",children:Object(f.jsx)(z,{filters:this.props.filters})}),Object(f.jsxs)("div",{className:"main-content",children:[Object(f.jsxs)("div",{className:"content-top-bar",children:[Object(f.jsxs)("div",{className:"results-count",children:["Results: ",this.state.archiveItems.length]}),Object(f.jsxs)("div",{className:"results-view-type",children:[Object(f.jsx)("div",{className:"view-type grid",onClick:function(){return e.setCurrentViewType("grid")},style:{backgroundImage:"grid"===this.state.currentViewType?"url(".concat($,")"):"url(".concat(q,")")}}),Object(f.jsx)("div",{className:"view-type list",onClick:function(){return e.setCurrentViewType("list")},style:{backgroundImage:"list"===this.state.currentViewType?"url(".concat(te,")"):"url(".concat(ee,")")}}),Object(f.jsx)("div",{className:"view-type map",onClick:function(){return e.setCurrentViewType("map")},style:{backgroundImage:"map"===this.state.currentViewType?"url(".concat(re,")"):"url(".concat(ae,")")}})]}),Object(f.jsx)("div",{className:"results-seach",children:Object(f.jsx)(Z,{})})]}),Object(f.jsx)("div",{className:"content-filters-summary",children:this.props.params&&this.renderParamsRecap()}),this.state.loading?Object(f.jsxs)("div",{className:"loading",children:[Object(f.jsx)(v.a,{animation:"border"}),"Loading resources"]}):this.renderCurrentViewType()]})]})}}]),a}(r.Component),ie=(a(300),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"about-view",children:"about"})}}]),a}(r.Component)),ce=(a(301),function(){var e=k(),t=Object(g.a)(e,1)[0];return Object(f.jsxs)("div",{className:"collection-view",children:[Object(f.jsx)("h2",{children:"Items Collected"}),Object(f.jsx)("div",{className:"collection-grid",children:t.map((function(e){return Object(f.jsx)(E,{resource:e})}))})]})}),ne=a.p+"static/media/logo.65b2bc4b.svg",le=(a(302),a.p+"static/media/collection.9ba941c0.svg"),oe=a.p+"static/media/collection-full.2832ecdb.svg",ue=function(){var e=function(){var e=k(),t=Object(g.a)(e,1)[0].length;return Object(f.jsxs)(m.b,{to:"/collection",className:"header-link",children:[Object(f.jsx)("div",{className:"collection-icon",style:{backgroundImage:"url(".concat(t>0?oe:le,")")}}),t]})};return Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(m.b,{to:"/",children:Object(f.jsx)("img",{src:ne,alt:"logo"})}),Object(f.jsxs)("div",{className:"header-links",children:[Object(f.jsx)(m.b,{to:"/explore",className:"header-link",children:"Explore"}),Object(f.jsx)(m.b,{to:"/about",className:"header-link",children:"About"}),Object(f.jsx)("a",{href:"#",className:"header-link",children:"Submit"}),Object(f.jsx)(e,{})]})]})},de=a(123),je=a.n(de),me=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={types:[],pandemics:[],languages:[],tags:[],countries:[],themes:[],cities:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new j.a({apiKey:"key8p1ipk3FEGppuA"}).base("appyRkLfkVtG84rMU");t("Type list").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,a){t?console.error(t):e.setState({types:a})})),t("Pandemic list").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,a){t?console.error(t):e.setState({pandemics:a})})),t("Language list").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,a){t?console.error(t):e.setState({languages:a})})),t("Tag list").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,a){t?console.error(t):e.setState({tags:a})})),t("Countries List").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,a){t?console.error(t):e.setState({countries:a})})),t("Themes list").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,a){t?console.error(t):e.setState({themes:a})})),t("Location List").select({view:"Grid view",filterByFormula:"{Count}>0"}).firstPage((function(t,a){t?console.error(t):e.setState({cities:a})}))}},{key:"render",value:function(){var e=this;return Object(f.jsx)(_.b,{ReactRouterRoute:h.b,children:Object(f.jsx)(C,{children:Object(f.jsxs)("div",{className:"App",children:["/"!==this.props.location.pathname?Object(f.jsx)(ue,{}):null,Object(f.jsx)("div",{className:"app-content",children:Object(f.jsxs)(h.d,{children:[Object(f.jsx)(h.b,{exact:!0,path:"/explore/resource/:resourceId",render:function(e){return Object(f.jsx)(F,{resourceId:e.match.params.resourceId})}}),Object(f.jsx)(h.b,{path:"/explore",render:function(t){var a=je.a.parse(t.location.search.slice(1));return Object(f.jsx)(se,{filters:e.state,params:a})}}),Object(f.jsx)(h.b,{path:"/about",render:function(){return Object(f.jsx)(ie,{})}}),Object(f.jsx)(h.b,{path:"/collection",render:function(){return Object(f.jsx)(ce,{})}}),Object(f.jsx)(h.b,{exact:!0,path:"/",render:function(){return Object(f.jsx)(O,{})}}),Object(f.jsx)(h.b,{path:"/",children:Object(f.jsx)(h.a,{to:"/"})})]})})]})})})}}]),a}(r.Component),be=Object(h.h)(me),he=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,313)).then((function(t){var a=t.getCLS,r=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),r(e),s(e),i(e),c(e)}))};a(305);c.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(m.a,{children:Object(f.jsx)(be,{})})}),document.getElementById("root")),he()}},[[306,1,2]]]);
//# sourceMappingURL=main.afedcd57.chunk.js.map