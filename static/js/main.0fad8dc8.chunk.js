(this["webpackJsonpische-pandemic-archive"]=this["webpackJsonpische-pandemic-archive"]||[]).push([[0],{113:function(e,t,s){},114:function(e,t,s){},115:function(e,t,s){},121:function(e,t,s){},184:function(e,t){},185:function(e,t){},261:function(e,t,s){},265:function(e,t,s){"use strict";s.r(t);var r=s(0),i=s.n(r),a=s(104),c=s.n(a),n=(s(113),s(12)),o=s(13),l=s(15),u=s(14),d=(s(114),s(115),s(267)),j=s(268),p=s(269),h=s(270),f=s(266),m=s(28),b=s(1),v=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(b.jsx)(m.c,{to:"/resource/"+this.props.item.id,children:Object(b.jsxs)(h.a,{style:{marginBottom:"10px",minHeight:"280px"},children:[this.props.item.fields.Attachments&&this.props.item.fields.Attachments.length>0&&Object(b.jsx)(h.a.Img,{variant:"top",src:this.props.item.fields.Attachments[0].url}),Object(b.jsxs)(h.a.Body,{children:[Object(b.jsx)(h.a.Title,{children:this.props.item.fields["Title ID"]}),Object(b.jsx)(h.a.Text,{}),this.props.item.fields.Type_name&&this.props.item.fields.Type_name.map((function(e){return Object(b.jsx)(f.a,{variant:"info",children:e})}))]})]})})}}]),s}(r.Component),O=(s(121),s(107)),x=s(27),y=function(e){var t=Object(x.c)(e.filterName,x.a),s=Object(O.a)(t,2),r=s[0],i=s[1],a=r||[];return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"filter-title",children:e.blockTitle}),Object(b.jsx)("ul",{children:e.filterItems.map((function(t){var s=t.fields[e.labelBy];return Object(b.jsx)("li",{children:Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{type:"checkbox",checked:a.includes(s),value:s,onChange:function(){return e=s,a.includes(e)?a.splice(a.indexOf(e),1):a.push(e),void i(a);var e}}),s," (",t.fields.Count,")"]})})}))})]})},g=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"sidebar-container",children:[Object(b.jsx)("div",{className:"filter-type",children:Object(b.jsx)(y,{blockTitle:"Resource Type",filterName:"Type",labelBy:"Type",filterItems:this.props.filters.types})}),Object(b.jsx)("div",{className:"filter-type",children:Object(b.jsx)(y,{blockTitle:"Tags",filterName:"Tags",labelBy:"Tag",filterItems:this.props.filters.tags})})]})}}]),s}(r.Component),k=s(22),N=s.n(k),w=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(n.a)(this,s);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={archiveItems:[],loading:!1},e}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){JSON.stringify(e.params)!==JSON.stringify(this.props.params)&&this.fetchData()}},{key:"fetchData",value:function(){var e=this,t=this;t.setState({loading:!0});var s=new N.a({apiKey:"key8p1ipk3FEGppuA"}).base("appyRkLfkVtG84rMU"),r=[];this.props.params&&Object.keys(this.props.params).forEach((function(t){var s=Array.isArray(e.props.params[t])?e.props.params[t]:[e.props.params[t]];r.push("OR("+s.map((function(e){return"{"+t+'}="'+e+'"'})).join(", ")+")")}));var i=r.length>0?"AND("+r.join(", ")+")":"";s("Data Sample").select({view:"Grid view",filterByFormula:i}).firstPage((function(e,s){e?console.error(e):t.setState({archiveItems:s,loading:!1})}))}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"home-view",children:[Object(b.jsx)("div",{className:"sidebar",children:Object(b.jsx)(g,{filters:this.props.filters})}),Object(b.jsx)("div",{className:"main-content",children:this.state.loading?Object(b.jsx)("div",{children:"Loading"}):Object(b.jsx)(d.a,{children:Object(b.jsx)(j.a,{xs:2,md:3,lg:4,children:this.state.archiveItems.map((function(e){return Object(b.jsx)(p.a,{children:Object(b.jsx)(v,{item:e})},e.id)}))})})})]})}}]),s}(r.Component),T=(s(261),function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(n.a)(this,s);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={resource:{}},e}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;new N.a({apiKey:"key8p1ipk3FEGppuA"}).base("appyRkLfkVtG84rMU")("Data Sample").find(this.props.resourceId,(function(t,s){t?console.error(t):e.setState({resource:s})}))}},{key:"resourceMedia",value:function(){return Object(b.jsx)("img",{src:this.state.resource.fields.Attachments[0].url,alt:this.state.resource.fields["Title ID"]})}},{key:"resourceInfo",value:function(){var e=this;return Object(b.jsxs)("div",{className:"resource-sideinfo",children:[Object(b.jsxs)("div",{className:"resource-title",children:[this.state.resource.fields["Title ID"],Object(b.jsx)("div",{className:"bookmark"})]}),Object(b.jsx)("div",{className:"resource-desc",children:this.state.resource.fields["Summary (limit 500)"]}),Object(b.jsx)("div",{className:"resource-metadata",children:["Pandemics","Type_name","Themes_name","Tags","Country","City","Language","Credits","Created","Published","Archived","Contributor"].map((function(t){return Object(b.jsxs)("div",{className:"meta-row",children:[Object(b.jsx)("div",{className:"meta-title",children:t}),Object(b.jsx)("div",{className:"meta-value",children:Array.isArray(e.state.resource.fields[t])?e.state.resource.fields[t].join(", "):e.state.resource.fields[t]})]},t)}))})]})}},{key:"render",value:function(){return this.state.resource.fields?Object(b.jsxs)("div",{className:"resource-view",children:[Object(b.jsx)("div",{className:"resource-preview",children:this.resourceMedia()}),Object(b.jsx)("div",{className:"resource-sideinfo-container",children:this.resourceInfo()})]}):Object(b.jsx)("div",{children:"Loading"})}}]),s}(r.Component)),I=s(106),A=s.n(I),C=s.p+"static/media/logo.65b2bc4b.svg",S=s(2),D=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(n.a)(this,s);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={types:[],pandemics:[],languages:[],tags:[],countries:[]},e}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=new N.a({apiKey:"key8p1ipk3FEGppuA"}).base("appyRkLfkVtG84rMU");t("Type list").select({view:"Grid view"}).firstPage((function(t,s){t?console.error(t):e.setState({types:s})})),t("Pandemic list").select({view:"Grid view"}).firstPage((function(t,s){t?console.error(t):e.setState({pandemics:s})})),t("Language list").select({view:"Grid view"}).firstPage((function(t,s){t?console.error(t):e.setState({languages:s})})),t("Tag list").select({view:"Grid view"}).firstPage((function(t,s){t?console.error(t):e.setState({tags:s})})),t("Countries List").select({view:"Grid view"}).firstPage((function(t,s){t?console.error(t):e.setState({countries:s})}))}},{key:"render",value:function(){var e=this;return Object(b.jsx)(m.a,{children:Object(b.jsx)(x.b,{ReactRouterRoute:S.a,children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("div",{className:"header",children:Object(b.jsx)(m.b,{to:"/",children:Object(b.jsx)("img",{src:C,alt:"logo"})})}),Object(b.jsx)("div",{className:"app-content",children:Object(b.jsxs)(S.c,{children:[Object(b.jsx)(S.a,{exact:!0,path:"/resource/:resourceId",render:function(e){return Object(b.jsx)(T,{resourceId:e.match.params.resourceId})}}),Object(b.jsx)(S.a,{path:"/",render:function(t){var s=A.a.parse(t.location.search.slice(1));return Object(b.jsx)(w,{archiveItems:e.state.archiveItems,filters:e.state,params:s})}})]})})]})})})}}]),s}(r.Component),G=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,271)).then((function(t){var s=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;s(e),r(e),i(e),a(e),c(e)}))};s(264);c.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(D,{})}),document.getElementById("root")),G()}},[[265,1,2]]]);
//# sourceMappingURL=main.0fad8dc8.chunk.js.map