{"version":3,"sources":["utils/airtable.js","assets/resource-placeholder-doc.svg","components/ResourceCard.jsx","components/ResourcesSlider.jsx","assets/logoE&PA.svg","assets/logo_ische.svg","components/commons/AnimatedLink.jsx","views/HomeView.jsx","utils/collection.js","assets/collection-add.svg","assets/collection-active.svg","components/ResourceExtendedInfo.jsx","components/RelatedResources.jsx","assets/arrow.svg","views/ResourceView.jsx","utils/embed.js","components/ResourcesGrid.jsx","components/PopoverStickOnHover.jsx","components/ResourcesList.jsx","assets/arrow-up.png","assets/arrow-down.png","components/maps/layers.js","components/maps/CountriesMap.jsx","components/maps/LocationsMap.jsx","components/ResourcesMap.jsx","components/FilterBlock.jsx","components/FilterDates.jsx","components/FilterSecondarySidebar.jsx","assets/reset-icon.svg","components/FilterSidebar.jsx","components/CurrentFiltersRecap.jsx","components/FilterSearch.jsx","assets/rectangle.svg","assets/rectangle-active.svg","assets/list.svg","assets/list-active.svg","assets/circle.svg","assets/circle-active.svg","views/ExploreView.jsx","views/AboutView.jsx","views/CollectionView.jsx","assets/logo.svg","assets/collection.svg","assets/collection-full.svg","components/Header.jsx","App.js","reportWebVitals.js","index.js"],"names":["base","Airtable","apiKey","process","MAIN_TABLE","ResourceCard","item","flick","history","useHistory","resourceImage","fields","Attachments","length","thumbnails","large","url","docPlaceholder","title","substring","pandemics","Pandemic_name","join","onClick","current","isPlaying","push","id","className","style","backgroundImage","ResourcesSlider","items","infinite","React","tag","viewportTag","cameraTag","classPrefix","deceleration","horizontal","circular","infiniteThreshold","lastIndex","Infinity","threshold","duration","panelEffect","x","Math","pow","defaultIndex","inputType","bounce","autoResize","zIndex","bound","overflow","hanger","gap","moveType","type","count","collectStatistics","ref","map","AnimatedLink","text","viewBox","href","transform","HomeView","state","archiveItems","loading","this","fetchData","self","setState","select","maxRecords","view","filterByFormula","firstPage","err","records","console","error","src","logo","alt","to","Spinner","animation","target","logoIsche","Component","CollectionContext","useCollectionState","createPersistedState","useCollection","context","Error","CollectionProvider","props","collection","setCollection","value","Provider","ResourceExtendedInfo","resource","infoFields","field","label","format","v","moment","CollectionAction","isInCollection","find","c","collectionCopy","JSON","parse","stringify","splice","findIndex","data-tip","collectionIconSaved","collectionIconAdd","effect","info","Array","isArray","RelatedResources","useState","relatedResources","setRelatedResources","setLoading","themesOptions","t","typesOptions","setTypesOptions","data","r","activeThemeOption","setActiveThemeOption","activeTypeOption","setActiveTypeOption","useEffect","formula","classNamePrefix","options","onChange","isSearchable","theme","colors","primary","neutral0","primary25","ResourceView","resourceId","setResource","viewRef","createRef","scrollTo","record","generateEmbedCode","source","code","URL","hostname","includes","youtubeId","replace","split","frameBorder","allow","allowFullScreen","vimeoId","ID","match","embedUtils","archiveUrl","width","height","spotifyUrl","params","origin","pathname","allowtransparency","scrolling","encodeURIComponent","ResourceMedia","resourceContent","images","att","original","thumbnail","showNav","showFullscreenButton","showPlayButton","goBack","arrow","ResourcesGrid","PopoverStickOnHover","handleMouseEnter","bind","handleMouseLeave","showPopover","delay","onMouseEnter","setTimeoutConst","setTimeout","clearTimeout","component","children","placement","child","Children","cloneElement","onMouseLeave","node","_child","Fragment","Overlay","show","shouldUpdatePosition","flip","defaultProps","ResourcesList","useMemo","i","columns","Header","accessor","sortType","tableInstance","useTable","useSortBy","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","getSortByToggleProps","render","isSorted","isSortedDesc","row","getRowProps","handleClick","cells","cell","getCellProps","clusterLayer","filter","paint","clusterCountLayer","layout","unclusteredPointLayer","ghostPoints","countriesLayer","property","stops","CountriesMap","onUpdate","zoom","viewport","setViewport","itemsWithCountry","countriesGeoJSON","countriesWithData","_","uniq","geojson","countries","features","f","maxItems","max","forEach","properties","intensity","makeCountrGeoJSON","onTransitionEnd","event","visibleCountryIds","queryRenderedFeatures","onViewportChange","nextViewport","interactiveLayerIds","LocationsMap","itemsWithLocation","locationsGeoJSON","geometry","coordinates","visibleResIds","layer","cluster","clusterMaxZoom","clusterRadius","ResourcesMap","mapType","setMapType","filteredItems","setFilteredItems","name","checked","FilterBlock","useQueryParam","filterName","ArrayParam","setFilterValue","paramsArray","filterItems","val","labelBy","isSelected","indexOf","FilterDates","NumberParam","startDate","setStartDate","endDate","setEndDate","selected","date","Date","UTC","getUTCFullYear","getUTCMonth","undefined","onChangeStart","dateFormat","placeholderText","showMonthYearPicker","onChangeEnd","FilterSecondarySidebar","open","onClose","clickRef","callback","e","fromDatePicker","String","contains","parentNode","document","addEventListener","removeEventListener","useClickOutside","left","filtersList","key","showSideMenu","currentFilterPanel","setShowSideMenu","blockTitle","filters","themes","types","tags","languages","cities","setFilterPanel","arrowIcon","currentFilterContent","ResetFilter","resetIcon","CurrentFiltersRecap","filterKey","displayValue","isValid","onRemove","FilterSeach","StringParam","seachQ","placeholder","ExploreView","currentViewType","prevProps","formulas","Object","keys","paramKey","filterVal","allRecords","eachPage","fetchNextPage","concat","setCurrentViewType","rectIconActive","rectIcon","listIconActive","listIcon","circleIconActive","circleIcon","FilterSearch","renderParamsRecap","renderCurrentViewType","CollectionView","csvData","Papa","filename","CollectionCount","activeClassName","collectionIconFull","collectionIcon","mapboxgl","workerClass","require","default","App","ReactRouterRoute","Route","location","exact","path","urlParams","qs","search","slice","withRouter","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.61c4752b.chunk.js","sourcesContent":["import Airtable from 'airtable'\n\n//const baseID = 'appVmbOc3ARWos22X' // TEST\nconst baseID = 'appyRkLfkVtG84rMU' // PRODUCTION\n\nexport const base = new Airtable({\n  apiKey:process.env.REACT_APP_AIRTABLE_API_KEY\n}).base(baseID);\n\nexport const MAIN_TABLE = \"Data\";","export default __webpack_public_path__ + \"static/media/resource-placeholder-doc.9441732c.svg\";","import './ResourceCard.sass';\nimport { useHistory } from \"react-router-dom\";\n\nimport docPlaceholder from '../assets/resource-placeholder-doc.svg';\n\nconst ResourceCard = ({item, flick}) => {\n\n  const history = useHistory();\n\n  function handleClick() {\n    if(!flick || !flick.current.isPlaying()) {\n      history.push(\"/explore/resource/\" + item.id);\n    }\n  }\n  \n  const resourceImage = item.fields.Attachments && item.fields.Attachments.length > 0 ? item.fields.Attachments[0].thumbnails.large.url : docPlaceholder\n\n  let title = item.fields['Title ID']\n  if(title.length > 60) {\n    title = title.substring(0, 57) + ' (...)'\n  }\n\n  let pandemics = item.fields.Pandemic_name ? item.fields.Pandemic_name.join(',') : ''\n  if(pandemics.length > 30) {\n    pandemics = pandemics.substring(0, 27) + ' (...)'\n  }\n\n  return (\n    <div onClick={handleClick} className=\"resource-card\">\n        <div className=\"thumb\" style={{backgroundImage: `url(${resourceImage})`}}></div>\n        <div className=\"card-title\">\n          <div className=\"title-text\">{title}</div>\n          <div className=\"title-underline\"><span>{title}</span></div>\n        </div>\n\n        <div className=\"card-badge\">{pandemics}</div>\n    </div>\n  )\n}\n\nexport default ResourceCard","import * as React from 'react';\nimport Flicking from \"@egjs/react-flicking\";\nimport ResourceCard from './ResourceCard'\nimport './ResourcesSlider.sass';\n \n\nconst ResourcesSlider = ({items, infinite}) => {\n  let flick =  React.createRef();\n\n  return (\n      <div className={`resource-slider ${infinite && 'infinite'}`} >\n        <div className=\"fade-left\"></div>\n        <Flicking\n            tag = \"div\"\n            viewportTag = \"div\"\n            cameraTag = \"div\"\n            classPrefix = \"eg-flick\"\n            deceleration = {0.0075}\n            horizontal = {true}\n            circular = {infinite}\n            infiniteThreshold = {0}\n            lastIndex = {Infinity}\n            threshold = {40}\n            duration = {100}\n            panelEffect = {x => 1 - Math.pow(1 - x, 3)}\n            defaultIndex = {0}\n            inputType = {[\"touch\", \"mouse\"]}\n            bounce = {10}\n            autoResize = {false}\n            zIndex = {2}\n            bound = {false}\n            overflow = {false}\n            hanger = {\"50%\"}\n            gap = {0}\n            moveType = {{type: \"snap\", count: 1}}\n            collectStatistics = {true}\n            ref={flick}\n          >\n            {items.map(item =>\n              <ResourceCard item={item} flick={flick} key={item.id}></ResourceCard>\n            )}\n        </Flicking>\n        <div className=\"fade-right\"></div>\n      </div>\n      \n  );\n};\n\nexport default ResourcesSlider;","export default __webpack_public_path__ + \"static/media/logoE&PA.86c17c6d.svg\";","export default __webpack_public_path__ + \"static/media/logo_ische.4bda62ee.svg\";","import './AnimatedLink.sass';\n\nconst AnimatedLink = ({text}) => {\n\n  return (\n    <a className=\"animated-btn\" >{text}\n      <svg className=\"animated-btn-stroke\" viewBox=\"0 0 430 62\">\n        <use href=\"#line\"></use>\n      </svg>\n      <svg className=\"animated-btn-stroke\" viewBox=\"0 0 430 62\">\n        <use href=\"#line\" transform=\"scale(2, 1)\"></use>\n      </svg>\n    </a>\n  )\n}\n\nexport default AnimatedLink","import {Component} from 'react'\nimport './HomeView.sass';\nimport {base, MAIN_TABLE} from '../utils/airtable'\nimport {Link} from 'react-router-dom'\nimport ResourcesSlider from '../components/ResourcesSlider'\nimport {Spinner} from 'react-bootstrap'\nimport logo from '../assets/logoE&PA.svg';\nimport logoIsche from '../assets/logo_ische.svg';\nimport AnimatedLink from '../components/commons/AnimatedLink'\n\nexport default class HomeView extends Component {\n  state = {\n\t\tarchiveItems: [],\n    loading: false\n\t}\n  componentDidMount() {\n    this.fetchData()\n  }\n  fetchData () {\n    var self = this\n    self.setState({\n      loading: true\n    });\n\n    //OR(RECORD_ID() = ‘recRjdJSziwMjfhO8’, RECORD_ID() = ‘recdRonUzKAIMPOxb’)\n    base(MAIN_TABLE).select({\n        maxRecords: 20,\n        view: 'Table',\n        filterByFormula: 'REGEX_MATCH({Status}, \"Published\")'\n    }).firstPage(function(err, records) {\n        if (err) { console.error(err); return; }\n        self.setState({\n\t\t\t\t\tarchiveItems: records,\n          loading: false\n\t\t\t\t});\n    })\n  }\n  render() {\n    return <div className=\"home-view\">\n            <div className=\"top-content\">\n              <div className=\"logo-block\">\n                <img src={logo} alt=\"logo\" className=\"logo-img\"/>\n                <div className=\"subtitle\">Web Archive on Educations and Pandemics: Past and Present</div>\n              </div>\n              <div className=\"about-block\">\n                <Link to=\"/explore\" className=\"big-link\"><AnimatedLink text=\"EXPLORE THE ARCHIVE\"></AnimatedLink></Link>\n                <Link to=\"/about\" className=\"big-link\"><AnimatedLink text=\"DISCOVER THE PROJECT\"></AnimatedLink></Link>\n                <a href=\"#\" className=\"big-link\"><AnimatedLink text=\"CONTRIBUTE TO THE ARCHIVE\"></AnimatedLink></a>\n              </div>\n            </div>\n            <div className=\"latest-content\">\n              <div className=\"latest-title\">Latest updates</div>\n              {this.state.loading ? \n                <div className=\"loading\"><Spinner animation=\"border\" />Loading resources</div>\n                :\n                (this.state.archiveItems.length > 0 ? \n                  <ResourcesSlider items={this.state.archiveItems} infinite={true}></ResourcesSlider>\n                  : \n                  <div>No resources</div>\n                )\n              }\n            </div>\n            <div className=\"ische-credits\">\n             A project by <a href=\"https://www.ische.org/\" target=\"_blank\"><img src={logoIsche} alt=\"logo-ische\" className=\"logo-ische\"/></a>\n            </div>\n          </div>\n  }\n}\n\n/*\n<div className=\"about-block\">\nShort introduction and mission web archive. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. \n                <div className=\"home-links\">\n                    <Link to=\"/explore\" className=\"home-link\">Explore</Link>\n                    <Link to=\"/about\" className=\"home-link\">About</Link>\n                    <a href=\"#\" className=\"home-link\">Submit</a>\n                </div>\n                </div>\n  */","import * as React from 'react'\nimport createPersistedState from 'use-persisted-state';\n\nconst CollectionContext = React.createContext()\n\nconst useCollectionState = createPersistedState('collection');\n\nfunction useCollection() {\n  const context = React.useContext(CollectionContext)\n  if (!context) {\n    throw new Error(`useCount must be used within a CollectionContext`)\n  }\n  return context\n}\nfunction CollectionProvider(props) {\n  const [collection, setCollection] = useCollectionState([])\n  const value = React.useMemo(() => [collection, setCollection], [collection])\n  return <CollectionContext.Provider value={value} {...props} />\n}\nexport {CollectionProvider, useCollection}\n\n/*\nexport function getCollection() {\n  let collection = JSON.parse(localStorage.getItem(STORAGE_KEY)) \n  return collection ? collection.items : []\n}\n\nexport function addToCollection(item) {\n  var collection = {};\n  var items = []\n  collection.items = items;\n  if (localStorage.getItem(STORAGE_KEY)) {\n    collection = JSON.parse(localStorage.getItem(STORAGE_KEY))\n  }\n  collection.items.push(item)\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(collection))\n}\n\nexport function removeFromCollection(item) {\n  // TODO\n}\n*/","export default __webpack_public_path__ + \"static/media/collection-add.d1a65b09.svg\";","export default __webpack_public_path__ + \"static/media/collection-active.88e6f50a.svg\";","import './ResourceExtendedInfo.sass';\nimport {useCollection} from '../utils/collection'\nimport moment from 'moment'\nimport AnimatedLink from './commons/AnimatedLink'\nimport ReactTooltip from 'react-tooltip';\n\nimport collectionIconAdd from '../assets/collection-add.svg';\nimport collectionIconSaved from '../assets/collection-active.svg';\n\nconst ResourceExtendedInfo = ({resource}) => {\n\n  let infoFields = [{\n    field: 'Pandemic_name',\n    label: 'Pandemic'\n    },\n    {\n    field: 'Type_name',\n    label: 'Type'\n    },\n    {\n    field: 'Themes_name',\n    label: 'Themes'\n    },\n    {\n    field: 'Tags_name',\n    label: 'Tags'\n    },\n    {\n    field: 'Country_name',\n    label: 'Country'\n    },\n    {\n    field: 'Location_name',\n    label: 'Location'\n    },\n    {\n    field: 'Language_name',\n    label: 'Language'\n    },\n    {\n    field: 'Credits',\n    label: 'Credits'\n    },\n    {\n    field: 'Production date',\n    label: 'Created',\n    format: (v) => v ? moment(v, \"YYYY-MM-DD\").format('DD/MM/YYYY') : ''\n    },\n    {\n    field: 'Publishing date',\n    label: 'Published',\n    format: (v) => v ? moment(v, \"YYYY-MM-DD\").format('DD/MM/YYYY') : ''\n    },\n    {\n    field: 'Added in the archive (YYYY-MM-DD)',\n    label: 'Archived',\n    format: (v) => v ? moment(v, \"YYYY-MM-DD\").format('DD/MM/YYYY') : ''\n    },\n    {\n    field: 'Contributor',\n    label: 'Contributor'\n    }]\n  \n  const CollectionAction = () => {\n    const [collection, setCollection] = useCollection()\n    \n    const toggleFromCollection = () => {\n      setCollection(c => {\n        let collectionCopy = JSON.parse(JSON.stringify(c));\n\n        if (collectionCopy.find(item => item.id == resource.id)) {\n          collectionCopy.splice(collectionCopy.findIndex(item => item.id == resource.id), 1)\n        } else {\n          collectionCopy.push({\n            id: resource.id,\n            fields: resource.fields\n          })\n        }\n        return collectionCopy\n      })\n    }\n    const isInCollection = collection.find(item => item.id === resource.id)\n    return <div className=\"collection-icon\" \n                onClick={toggleFromCollection}\n                data-tip={isInCollection ? \"Remove item\" : \"Save item\"}\n                style={{ backgroundImage: !isInCollection ? `url(${collectionIconAdd})`: `url(${collectionIconSaved})` }}>\n                  <ReactTooltip effect=\"solid\"/>\n            </div>\n  }\n  return <div className=\"resource-extended-info\">\n            <div className=\"resource-title\">\n              {resource.fields['Title ID']}\n              <CollectionAction/>\n            </div>\n            <div className=\"resource-desc\">\n              {resource.fields['Summary (limit 500)']}\n            </div>\n            <div className=\"resource-metadata\">\n              {infoFields.map(info => {\n                return <div className=\"meta-row\" key={info.field}>\n                  <div className=\"meta-title\">{info.label}</div>\n                  <div className=\"meta-value\">{\n                    info.format ? info.format(resource.fields[info.field]) : (\n                      Array.isArray(resource.fields[info.field]) ? resource.fields[info.field].join(', ') : (resource.fields[info.field] || '/')\n                    )}\n                  </div>\n                </div>\n                }\n              )}\n            </div>\n            {resource.fields['URL'] && <a className=\"resource-source\" href={resource.fields['URL']}>\n                <AnimatedLink text=\"GO TO RESOURCE\"></AnimatedLink>\n            </a>\n            }\n        </div>\n}\n\n\nexport default ResourceExtendedInfo","import React, { useEffect, useState } from \"react\";\n\nimport {base, MAIN_TABLE} from '../utils/airtable'\n\nimport ResourcesSlider from '../components/ResourcesSlider'\nimport {Spinner} from 'react-bootstrap'\n\nimport Select from 'react-select'\n\n\nconst RelatedResources = ({resource}) => {\n  const [relatedResources, setRelatedResources] = useState([]);\n  const [loading, setLoading] = useState(false)\n\n  const themesOptions = (resource.fields && resource.fields['Themes_name'])? resource.fields['Themes_name'].map(t => {\n    return { value: t, label: t }\n  }) : []\n\n  const [typesOptions, setTypesOptions] = useState([]);\n\n  if(typesOptions.length == 0){\n    base('Type list').select({\n      view: 'Grid view',\n      filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        setTypesOptions(data.map(r => {\n          return { value: r.fields['Type'], label: r.fields['Type'] }\n        }))\n    })\n  }\n\n  const [activeThemeOption, setActiveThemeOption] = useState(themesOptions[0]);\n  const [activeTypeOption, setActiveTypeOption] = useState({value: resource.fields['Type_name'], label:resource.fields['Type_name']});\n\n  useEffect(() => {\n    setLoading(true)\n\n    let formula = ''\n    if (activeThemeOption) {\n      formula = 'AND(FIND(\"'+activeTypeOption.value+'\",{Type}), FIND(\"'+activeThemeOption.value+'\",{Themes}))'\n    } else {\n      formula = 'FIND(\"'+activeTypeOption.value+'\",{Type})'\n    }\n    formula = 'AND(REGEX_MATCH({Status}, \"Published\"), '+ formula +')'\n    \n    base(MAIN_TABLE).select({\n      view: 'Table',\n      filterByFormula: formula\n    }).firstPage(function(err, records) {\n        if (err) { console.error(err); return; }\n        setRelatedResources(records)\n        setLoading(false)\n    })\n  }, [activeThemeOption, activeTypeOption])\n\n\n  return (\n    <div className=\"related-resources-panel\">\n      <div className=\"related-options\">\n        <span>Explore other</span>\n        <Select classNamePrefix=\"custom-select\" \n          options={typesOptions} \n          onChange={setActiveTypeOption}\n          value={activeTypeOption}\n          isSearchable={false}\n          theme={theme => ({\n            ...theme,\n            colors: {\n              ...theme.colors,\n              primary: '#F3EFE6',\n              neutral0: '#FFFFF',\n              primary25: '#FBFAF7'\n            },\n          })}/>\n        <span>in theme</span>\n          <Select classNamePrefix=\"custom-select\" \n            options={themesOptions} \n            onChange={setActiveThemeOption}\n            value={activeThemeOption}\n            isSearchable={false}\n            theme={theme => ({\n              ...theme,\n              colors: {\n                ...theme.colors,\n                primary: '#F3EFE6',\n                neutral0: '#FFFFF',\n                primary25: '#FBFAF7'\n              },\n            })}/>\n      </div>\n      {loading ? \n        <div className=\"loading\"><Spinner animation=\"border\" />Loading resources</div>\n      :\n      (relatedResources.length > 0 ? \n        <ResourcesSlider items={relatedResources} infinite={false}></ResourcesSlider> \n        : \n        <div>No related resources</div>\n      )\n      }\n    </div>\n  )\n}\n\nexport default RelatedResources","export default __webpack_public_path__ + \"static/media/arrow.9282adbf.svg\";","import React, { useEffect, useState } from \"react\";\nimport './ResourceView.sass';\nimport {base, MAIN_TABLE} from '../utils/airtable'\nimport {Spinner} from 'react-bootstrap'\nimport * as embedUtils from '../utils/embed'\nimport ResourceExtendedInfo from '../components/ResourceExtendedInfo'\nimport RelatedResources from '../components/RelatedResources'\nimport { useHistory } from \"react-router-dom\";\n\nimport arrow from '../assets/arrow.svg';\n\nimport ImageGallery from 'react-image-gallery';\n\n\nconst ResourceView = ({resourceId}) => {\n  const [resource, setResource] = useState({});\n  let viewRef = React.createRef()\n  let history = useHistory();\n\n  useEffect(() => {\n    viewRef.current && viewRef.current.scrollTo(0, 0)\n    setResource({})\n\n    base(MAIN_TABLE).find(resourceId, function(err, record) {\n      if (err) { console.error(err); return; }\n      setResource(record)\n    })\n  }, [resourceId])\n\n  const generateEmbedCode = () => {\n    let code = <div></div>\n    let source\n    try {\n      source = new URL(resource.fields['URL'])\n    } catch (err) {\n      code = <div>No url is defined</div>\n    }\n    if (source){\n      // YouTube\n      if (source.hostname.includes('youtu')) {\n        let youtubeId = embedUtils.getYoutubeId(source.href)\n        code = <iframe title=\"content\" src={'https://www.youtube.com/embed/' + youtubeId} frameBorder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen></iframe>\n      }\n\n      // VIMEO\n      else if (source.hostname.includes('vimeo')) {\n        let vimeoId = embedUtils.getVimeoId(source.href)\n        code = <iframe title=\"content\" src={\"https://player.vimeo.com/video/\" + vimeoId} frameBorder=\"0\" allow=\"autoplay; fullscreen; picture-in-picture\" allowFullScreen></iframe>\n      }\n\n      // Archive\n      else if (source.hostname.includes('archive.org')) {\n        let archiveUrl = embedUtils.getArchiveURL(source.href)\n        code = <iframe width=\"100%\" height=\"360\" title=\"content\" src={archiveUrl} frameBorder=\"0\" allow=\"autoplay; fullscreen; picture-in-picture\" allowFullScreen></iframe>\n      }\n\n      // Spotify\n      else if (source.hostname.includes('spotify')) {\n        let spotifyUrl = embedUtils.getSpotifyUrl(source.href)\n        code = <iframe width=\"100%\" height=\"360\" title=\"content\" src={spotifyUrl} frameBorder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\"></iframe>\n      }\n      // Soundcloud\n      else if (source.hostname.includes('soundcloud')) {\n        code = <iframe width=\"100%\" height=\"300\" title=\"content\" scrolling=\"no\" frameBorder=\"no\" allow=\"autoplay\" src={'https://w.soundcloud.com/player/?url=' + encodeURIComponent(source.href) + '&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true'}></iframe>\n      }\n    }\n\n    return <div className=\"iframe-container\">{code}</div>\n  }\n\n  const ResourceMedia = () => {\n    let resourceContent = <span>No item format defined</span>\n    let isEmbed = resource.fields['Embed']\n    if (isEmbed) {\n      resourceContent = generateEmbedCode()\n    } else {\n      if (resource.fields['Attachments']){\n        if (resource.fields['Attachments'].length > 1) {\n          let images = resource.fields['Attachments'].map(att => {\n            return {\n              original: att.url,\n              thumbnail: att.thumbnails.large.url\n            }\n          })\n          resourceContent = <ImageGallery items={images} infinite={false} showNav={false} showFullscreenButton={false} showPlayButton={false}/>\n        }\n        else {\n          resourceContent = <img src={resource.fields['Attachments'][0].url} alt={resource.fields['Title ID']}></img>\n        }\n      }\n    }\n    return resourceContent\n  }\n  \n  return resource.fields ? \n    (\n    <div className=\"resource-page\" ref={viewRef}>\n      <div className=\"resource-view\">\n        <div className=\"navigate-back\" onClick={()=> history.goBack()}>\n          <div className=\"arrow-icon\" \n            style={{ backgroundImage: `url(${arrow})` }}\n          ></div>\n          <span>BACK TO THE RESULTS</span>\n        </div>\n        <div className=\"resource-preview\">\n          <ResourceMedia></ResourceMedia>\n        </div>\n        <div className=\"resource-sideinfo-container\">\n          <ResourceExtendedInfo resource={resource}></ResourceExtendedInfo>\n          <a className=\"mailto\" href=\"mailto:archive.project@ische.org\">Contact us if you know more about this item</a>\n        </div>\n      </div>\n      <div className=\"related-resources\">\n        <RelatedResources resource={resource}></RelatedResources>\n      </div>\n    </div>\n    )\n  :\n  (<div className=\"loading\"><Spinner animation=\"border\" />Loading resource</div>)\n}\n\nexport default ResourceView","export function getYoutubeId(url) {\n  var ID = '';\n  url = url.replace(/(>|<)/gi,'').split(/(vi\\/|v=|\\/v\\/|youtu\\.be\\/|\\/embed\\/)/)\n  if(url[2]) {\n    ID = url[2].split(/[^0-9a-z_\\-]/i)\n    ID = ID[0]\n  }\n  else {\n    ID = url\n  }\n  return ID\n}\n\nexport function getVimeoId (url) {\n  var ID = '';\n  var regExp = /https:\\/\\/(www\\.)?vimeo.com\\/(\\d+)($|\\/)/;\n  var match = url.match(regExp);\n  if (match){\n    ID = match[2]\n  }\n  return ID\n}\n\nexport function getArchiveURL (url) {\n  return url.replace('details','embed')\n}\n\nexport function getSpotifyUrl(url) {\n  //TODO: Not always is \"embed\", check what happens with songs/album/podcasts\n  let params = new URL(url)\n  return params.origin + '/embed/' + params.pathname\n}\n\n","import ResourceCard from '../components/ResourceCard'\nimport './ResourcesGrid.sass';\n\nconst ResourcesGrid = ({archiveItems}) => {\n\n  return (\n    <div className=\"resouce-grid-container\">\n      {archiveItems.map((item) => (\n          <ResourceCard item={item} key={item.id}></ResourceCard>\n      ))}\n    </div>\n  )\n}\n\nexport default ResourcesGrid\n","/*\n* Usage:\n* <PopoverStickOnHover\n*    component={<div>Holy guacamole! I'm Sticky.</div>}\n*    placement=\"top\"\n*    onMouseEnter={() => { }}\n*    delay={200}\n* >\n*   <div>Show the sticky tooltip</div>\n* </PopoverStickOnHover>\n*/\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { Overlay } from 'react-bootstrap'\n\nexport default class PopoverStickOnHover extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.handleMouseEnter = this.handleMouseEnter.bind(this)\n    this.handleMouseLeave = this.handleMouseLeave.bind(this)\n\n    this.state = {\n      showPopover: false,\n    }\n  }\n\n  handleMouseEnter() {\n    const { delay, onMouseEnter } = this.props\n\n    this.setTimeoutConst = setTimeout(() => {\n      this.setState({ showPopover: true }, () => {\n        if (onMouseEnter) {\n          onMouseEnter()\n        }\n      })\n    }, delay);\n  }\n\n  handleMouseLeave() {\n    clearTimeout(this.setTimeoutConst)\n    this.setState({ showPopover: false })\n  }\n\n  componentWillUnmount() {\n    if (this.setTimeoutConst) {\n      clearTimeout(this.setTimeoutConst)\n    }\n  }\n\n  render() {\n    let { component, children, placement } = this.props\n\n    const child = React.Children.map(children, (child) => (\n      React.cloneElement(child, {\n        onMouseEnter: this.handleMouseEnter,\n        onMouseLeave: this.handleMouseLeave,\n        ref: (node) => {\n          this._child = node\n          const { ref } = child\n          if (typeof ref === 'function') {\n            ref(node);\n          }\n        }\n      })\n    ))[0]\n\n    return(\n      <React.Fragment>\n        {child}\n        <Overlay\n          show={this.state.showPopover}\n          placement={placement}\n          target={this._child}\n          shouldUpdatePosition={true}\n          flip={true}\n        >\n          \n          {component}\n        </Overlay>\n      </React.Fragment>\n    )\n  }\n}\n\nPopoverStickOnHover.defaultProps = {\n  delay: 0\n}\n\nPopoverStickOnHover.propTypes = {\n  delay: PropTypes.number,\n  onMouseEnter: PropTypes.func,\n  children: PropTypes.element.isRequired,\n  component: PropTypes.node.isRequired\n}","import React from 'react';\nimport { useTable, useSortBy } from 'react-table'\nimport arrowDown from '../assets/arrow-down.png';\nimport arrowUp from '../assets/arrow-up.png';\nimport './ResourcesList.sass';\nimport { useHistory } from \"react-router-dom\";\n\nimport PopoverStickOnHover from './PopoverStickOnHover'\n\nconst ResourcesList = ({archiveItems}) => {\n  const data = React.useMemo(\n    () => archiveItems.map(i => {\n      return {\n        ...i.fields,\n        id: i.id\n      }\n    }),\n    []\n  )\n\n  const columns = React.useMemo(\n    () => [\n      {\n        Header: 'Pandemics',\n        accessor: 'Pandemic_name',\n        sortType: 'basic'\n      },\n      {\n        Header: 'Title',\n        accessor: 'Title ID',\n        sortType: 'basic'\n      },\n      {\n        Header: 'Type',\n        accessor: 'Type_name',\n        sortType: 'basic'\n      },\n      {\n        Header: 'Themes',\n        accessor: 'Themes_name',\n        sortType: 'basic'\n      },\n      {\n        Header: 'Tags',\n        accessor: 'Tags_name',\n        sortType: 'basic'\n      },\n      {\n        Header: 'Languages',\n        accessor: 'Language_name',\n        sortType: 'basic'\n      },\n      {\n        Header: 'Contributor',\n        accessor: 'Contributor',\n        sortType: 'basic'\n      },\n    ],\n    []\n  )\n\n  const tableInstance = useTable({ columns, data },useSortBy)\n \n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow,\n  } = tableInstance\n  \n\n  let history = useHistory();\n  const handleClick = (row) => {\n    history.push(\"/explore/resource/\"+row.original.id);\n  }\n\n  return (\n    // apply the table props\n    <table {...getTableProps()} className=\"resource-table\">\n      <thead>\n        {// Loop over the header rows\n        headerGroups.map(headerGroup => (\n          // Apply the header row props\n          <tr {...headerGroup.getHeaderGroupProps()}>\n            {// Loop over the headers in each row\n            headerGroup.headers.map(column => (\n              // Apply the header cell props\n              <th {...column.getHeaderProps(column.getSortByToggleProps())}>\n                {// Render the header\n                column.render('Header')}\n                {column.isSorted && (<span>\n                  <img src={\n                    (column.isSortedDesc ? arrowUp : arrowDown)\n                  }\n                  alt=\"arrow sort\"\n                  />\n                </span>\n                )}\n              </th>\n            ))}\n          </tr>\n        ))}\n      </thead>\n      {/* Apply the table body props */}\n      <tbody {...getTableBodyProps()}>\n        {// Loop over the table rows\n        rows.map(row => {\n          // Prepare the row for display\n          prepareRow(row)\n          return (\n            // Apply the row props\n            <PopoverStickOnHover\n              component={row.original.Attachments ? <img src={row.original.Attachments[0].url} style={{width: '30vw'}} alt={row.original['Title ID']}/> : <div></div>}\n              placement=\"bottom\"\n              onMouseEnter={() => { }}\n              delay={200}\n            >\n              <tr {...row.getRowProps()} onClick={() => handleClick(row)}>\n              {// Loop over the rows cells\n              row.cells.map(cell => {\n                // Apply the cell props\n                return (\n                  <td {...cell.getCellProps()}>\n                    {// Render the cell contents\n                    Array.isArray(cell.value) ? cell.value.join(', ') : cell.render('Cell')\n                    //cell.render('Cell')\n                    }\n                  </td>\n                )\n              })}\n            </tr>\n          </PopoverStickOnHover>\n          )\n        })}\n      </tbody>\n    </table>\n  )\n}\n\nexport default ResourcesList\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAKCAYAAACXDi8zAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAABqADAAQAAAABAAAACgAAAABdWr2nAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAAaklEQVQIHa1N2wmAMAzMtXUPR/GznyIU+medzFHqKt3AASSRlAYcwIOQe5EQDeQ1zjqmnRI1ZEIVj2ohuhlwCuHSEkgWPHI4DlSUCHNz4Kacg9u11JG2WHKKZUjqP0x8949BsLsA38zeJL2bKCO4XXydawAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAKCAYAAACXDi8zAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACDSURBVHgBrYwxDoJQEERn9397j2CsjF5CO7Ui0RBLPYlHIXaWlnZyCaMNCfeA/wc2ATo6Jtni7cuMQ5f0dEg26+Xq+yv+xr4XqpyHoBgYI5lQSHo+3rWOD8ywDQFwEXn0uHp70ktGSi5tn8pMa97Eapdkv6CTjw1Lxd3z9S6HTZN2PTe6Lif4Lfk8sgAAAABJRU5ErkJggg==\"","export const clusterLayer = {\n  id: 'clusters',\n  type: 'circle',\n  source: 'locations-cluster',\n  filter: ['has', 'point_count'],\n  paint: {\n    'circle-color': '#B87333',\n    'circle-radius': ['step', ['get', 'point_count'], 20, 100, 30, 750, 40]\n  }\n};\n\nexport const clusterCountLayer = {\n  id: 'cluster-count',\n  type: 'symbol',\n  source: 'locations-cluster',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': 12,\n  },\n  paint: {\n    \"text-color\": \"#ffffff\"\n  }\n};\n\nexport const unclusteredPointLayer = {\n  id: 'unclustered-point',\n  type: 'circle',\n  source: 'locations-cluster',\n  filter: ['!', ['has', 'point_count']],\n  paint: {\n    'circle-color': '#B87333',\n    'circle-radius': 10\n  }\n};\n\nexport const ghostPoints = {\n  id: 'ghost-points',\n  type: 'circle',\n  source: 'locations',\n  paint: {\n    'circle-color': '#B87333',\n    'circle-radius': 0\n  }\n};\n\nexport const countriesLayer = {\n  id: 'data',\n  type: 'fill',\n  paint: {\n    'fill-color': '#B87333',\n    'fill-opacity': {\n      property: 'intensity',\n      stops: [\n        [0, 0.2],\n        [1, 0.95]\n      ]\n    },\n  }\n};","import * as React from 'react';\nimport { useEffect, useState, useMemo } from 'react';\n\nimport ReactMapGL, {Source, Layer} from 'react-map-gl';\nimport _ from \"lodash\";\nimport {countriesLayer} from './layers';\nimport countries from '../../assets/geojson/countries.geo.json'\n\nfunction makeCountrGeoJSON(items) {\n  const countriesWithData = _.uniq(items.map(i => i.fields['Country_a3'][0]))\n  let geojson = {\n    ...countries,\n    features: countries.features.filter(f => countriesWithData.includes(f.id))\n  }\n  let maxItems = _.max(countriesWithData.map(c => items.filter(i => i.fields['Country_a3'] == c).length))\n  geojson.features.forEach(f => {\n    f.properties.intensity = items.filter(i => i.fields['Country_a3'] == f.id).length / maxItems\n    f.properties.id = f.id\n  })\n  return geojson\n}\n\n\nfunction CountriesMap({archiveItems, onUpdate}) {\n  let map =  React.createRef();\n\n  const [viewport, setViewport] = useState({\n    width: '100%',\n    height: '100%',\n    zoom: 1\n  });\n\n  const itemsWithCountry = archiveItems.filter(i => i.fields['Country'])\n  useEffect(() => {\n    onUpdate(itemsWithCountry)\n  }, []);\n\n  const onMapMove = event => {\n    if(map.current){\n      var features =  map.current.queryRenderedFeatures()\n      var visibleCountryIds = features.map(f => f.properties.id).filter(f => f)\n      onUpdate(itemsWithCountry.filter(i => visibleCountryIds.includes(i.fields['Country_a3'][0])))\n    }\n  }\n\n  const countriesGeoJSON = useMemo(() => makeCountrGeoJSON(itemsWithCountry), itemsWithCountry)\n\n  return <ReactMapGL\n            ref={map}\n            {...viewport}\n            onTransitionEnd={onMapMove}\n            onViewportChange={nextViewport => setViewport(nextViewport)}\n            interactiveLayerIds={[countriesLayer.id]}\n          >\n            <Source id=\"countries\" type=\"geojson\"\n              data={countriesGeoJSON}>\n              <Layer {...countriesLayer} />\n            </Source>\n        </ReactMapGL>\n}\n\nexport default CountriesMap\n","import * as React from 'react';\nimport { useEffect, useState, useMemo } from 'react';\n\nimport ReactMapGL, {Source, Layer} from 'react-map-gl';\nimport _ from \"lodash\";\nimport {clusterLayer, clusterCountLayer, unclusteredPointLayer, ghostPoints} from './layers';\n\nfunction makeLocationsGeoJSON(items) {\n  return {\n    type: 'FeatureCollection',\n    features: items.map(item => {\n      return {\n        type: 'Feature',\n        properties: {\n          id: item.id,\n          type: 'resource'\n        },\n        geometry: {type: 'Point', coordinates: [item.fields['Location_long'][0], item.fields['Location_lat'][0]]}}\n    })\n  }\n}\n\nfunction LocationsMap({archiveItems, onUpdate}) {\n  let map =  React.createRef();\n\n  const [viewport, setViewport] = useState({\n    width: '100%',\n    height: '100%',\n    zoom: 1\n  });\n  debugger\n\n  const itemsWithLocation = archiveItems.filter(i => i.fields['Location'] && i.fields['Location_long'] && i.fields['Location_lat'])\n  useEffect(() => {\n    onUpdate(itemsWithLocation)\n  }, []);\n\n  const onMapMove = event => {\n    if(map.current){\n      var features =  map.current.queryRenderedFeatures()\n      let visibleResIds = features.filter(f=> f.layer.id == ghostPoints.id).map(f => f.properties.id)\n      onUpdate(itemsWithLocation.filter(i => visibleResIds.includes(i.id)))\n    }\n  }\n\n  const locationsGeoJSON = useMemo(() => makeLocationsGeoJSON(itemsWithLocation), itemsWithLocation)\n\n  //map.current && map.current.on('move', onMapMove)\n  return (\n        <ReactMapGL\n          ref={map}\n          {...viewport}\n          onTransitionEnd={onMapMove}\n          onViewportChange={nextViewport => setViewport(nextViewport)}\n          interactiveLayerIds={[ghostPoints.id]}\n        >\n          <Source id=\"locations-cluster\" type=\"geojson\"\n              data={locationsGeoJSON}\n              cluster={true}\n              clusterMaxZoom={14}\n              clusterRadius={50}\n            >\n              <Layer {...clusterLayer} />\n              <Layer {...clusterCountLayer} />\n              <Layer {...unclusteredPointLayer} />\n            </Source>\n            <Source id=\"locations\" type=\"geojson\"\n              data={locationsGeoJSON}>\n              <Layer {...ghostPoints} />\n            </Source>\n        </ReactMapGL>\n  )\n}\n\nexport default LocationsMap\n","import * as React from 'react';\nimport { useState, useMemo } from 'react';\nimport ReactMapGL, {Source, Layer} from 'react-map-gl';\nimport './ResourcesMap.sass';\nimport ResourcesGrid from './ResourcesGrid';\nimport CountriesMap from './maps/CountriesMap';\nimport LocationsMap from './maps/LocationsMap';\n\nfunction ResourcesMap({archiveItems}) {\n\n  const [mapType, setMapType] = useState('countries');\n  const [filteredItems, setFilteredItems] = useState(archiveItems);\n\n  //map.current && map.current.on('move', onMapMove)\n  return (\n    <div className=\"resource-map\">\n      <div className=\"map-container\">\n        {mapType == 'locations' && (\n          <LocationsMap archiveItems={archiveItems} onUpdate={setFilteredItems}></LocationsMap>\n        )}\n        {mapType == 'countries' && (\n          <CountriesMap archiveItems={archiveItems} onUpdate={setFilteredItems}></CountriesMap>\n          )\n        }\n      </div>\n      <div className=\"map-sidebar\">\n        <div className=\"map-options\">\n          Map view \n          <label>\n            <input\n              type=\"radio\"\n              name=\"map-type-option\"\n              value=\"countries\"\n              checked={mapType === 'countries'}\n              onChange={() => setMapType('countries')}\n              className=\"map-option-input\"\n            />\n            COUNTRIES\n          </label>\n          <label>\n            <input\n              type=\"radio\"\n              name=\"map-type-option\"\n              value=\"locations\"\n              checked={mapType === 'locations'}\n              onChange={() => setMapType('locations')}\n              className=\"map-option-input\"\n            />\n            LOCATIONS\n          </label>\n        </div>\n        <div className=\"resource-list\">\n          <ResourcesGrid archiveItems={filteredItems}></ResourcesGrid>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ResourcesMap\n","import * as React from 'react';\nimport { useQueryParam, ArrayParam } from 'use-query-params';\n\nconst FilterBlock = (props) => {\n  const [params, setFilterValue] = useQueryParam(props.filterName, ArrayParam);\n\n  const paramsArray = params || []\n\n  const onChange = (value) => {\n    if(paramsArray.includes(value)){\n      paramsArray.splice(paramsArray.indexOf(value), 1)\n    } else {\n      paramsArray.push(value)\n    }\n    setFilterValue(paramsArray)\n  }\n\n  return (\n    <div className=\"filter-list\">\n        {props.filterItems.map(filter =>{\n          const val = filter.fields[props.labelBy]\n          const isSelected = paramsArray.includes(val)\n           return (\n             <label className={`filter-list-item ${isSelected ? \"checked\" : \" \"}`}>\n              <div className=\"circle-checkbox\"></div>\n              <input type=\"checkbox\"\n                checked={isSelected} \n                value={val} \n                onChange={() => onChange(val)}\n                ></input>\n                {val} ({filter.fields['Count']})\n             </label>\n           )\n        })}\n    </div>\n  );\n};\n\nexport default FilterBlock;","import * as React from 'react';\nimport { useQueryParam, StringParam, NumberParam } from 'use-query-params';\nimport Select from 'react-select'\nimport DatePicker from 'react-datepicker'\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nconst FilterDates = () => {\n  const [startDate, setStartDate] = useQueryParam('dateFrom', NumberParam);\n  const [endDate, setEndDate] = useQueryParam('dateTo', NumberParam);\n\n\n  const onChangeStart = (date) => {\n    let v = date? Date.UTC(date.getUTCFullYear(), date.getUTCMonth()) : undefined\n    setStartDate(v)\n  }\n  const onChangeEnd = (date) => {\n    let v = date? Date.UTC(date.getUTCFullYear(), date.getUTCMonth()) : undefined\n    setEndDate(v)\n  }\n\n  return (\n    <div className=\"filter-dates\">\n      Select the dates range to refine your search.\n      <div className=\"date-input dates-from\">\n        <label>From</label>\n        <DatePicker\n          selected={startDate}\n          onChange={date => onChangeStart(date)}\n          dateFormat=\"MM/yyyy\"\n          placeholderText=\"Month / Year\"\n          showMonthYearPicker\n        />\n      </div>\n      <div className=\"date-input dates-to\">\n        <label>To</label>\n        <DatePicker\n          selected={endDate}\n          onChange={date => onChangeEnd(date)}\n          dateFormat=\"MM/yyyy\"\n          placeholderText=\"Month / Year\"\n          showMonthYearPicker\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default FilterDates;","import * as React from 'react';\nimport arrow from '../assets/arrow.svg';\n\nconst useClickOutside = (ref, callback) => {\n  const handleClick = e => {\n    let fromDatePicker = e.target.className instanceof String && e.target.className.includes('react-datepicker')\n    if (ref.current && !ref.current.contains(e.target) && !ref.current.parentNode.contains(e.target) && !fromDatePicker) {\n      callback();\n    }\n  };\n  React.useEffect(() => {\n    document.addEventListener('click', handleClick);\n    return () => {\n      document.removeEventListener('click', handleClick);\n    };\n  });\n};\n\nconst FilterSecondarySidebar = ({open, width, children, title, onClose }) => {\n  const clickRef = React.useRef();\n  useClickOutside(clickRef, () => {open && onClose()});\n\n  const left = open ? `${width}px` : '0px'\n  return (\n    <React.Fragment>\n      <div\n        ref={clickRef}\n        className=\"secondary-sidebar\"\n        style={{\n          left: left,\n          //transform: `translatex(${xPosition}px)`,\n          width: `${width}px`,\n        }}\n      >\n        <div className=\"secondary-sidebar-header\">\n          <div className=\"arrow-icon reverse\" \n            style={{ backgroundImage: `url(${arrow})` }}\n            onClick={() => onClose()}\n            ></div>\n          <div className=\"filter-title\">\n            {title}\n          </div>\n        </div>\n        <div className=\"secondary-sidebar-content\">{children}</div>\n      </div>\n    </React.Fragment>\n  )\n}\n\nexport default FilterSecondarySidebar\n","export default __webpack_public_path__ + \"static/media/reset-icon.1921e3f5.svg\";","import {Component} from 'react'\nimport './FilterSidebar.sass';\nimport { useHistory } from \"react-router-dom\";\n\nimport FilterBlock from './FilterBlock'\nimport FilterDates from './FilterDates'\n\nimport FilterSecondarySidebar from './FilterSecondarySidebar'\nimport arrowIcon from '../assets/arrow.svg';\nimport resetIcon from '../assets/reset-icon.svg';\n\nconst filtersList = [\n  {\n    key: 'pandemics',\n    label: 'Pandemics'\n  },\n  {\n    key: 'themes',\n    label: 'Themes'\n  },\n  {\n    key: 'tags',\n    label: 'Tags'\n  },\n  {\n    key: 'resource_type',\n    label: 'Types'\n  },\n  {\n    key: 'languages',\n    label: 'Languages'\n  },\n  {\n    key: 'countries',\n    label: 'Countries'\n  },\n  {\n    key: 'locations',\n    label: 'Locations'\n  },\n  {\n    key: 'dates',\n    label: 'Dates'\n  }\n]\n\nexport default class ResourceCard extends Component {\n  state = {\n    showSideMenu: false,\n    currentFilterPanel: null\n\t}\n\n  setShowSideMenu(show) {\n    this.setState({\n      showSideMenu: show\n    });\n  }\n\n  setFilterPanel (value) {\n    this.setState({\n      currentFilterPanel: value\n    })\n    value && this.setShowSideMenu(true)\n  }\n\n  currentFilterContent () {\n    switch (this.state.currentFilterPanel) {\n      case 'pandemics':\n        return <FilterBlock blockTitle=\"Pandemics\" filterName=\"Pandemic\" labelBy=\"Name\" filterItems={this.props.filters.pandemics}></FilterBlock>\n      case 'themes':\n        return <FilterBlock blockTitle=\"Themes\" filterName=\"Themes\" labelBy=\"Theme\" filterItems={this.props.filters.themes}></FilterBlock>\n      case 'resource_type':\n        return <FilterBlock blockTitle=\"Resource Type\" filterName=\"Type\" labelBy=\"Type\" filterItems={this.props.filters.types}></FilterBlock>\n      case 'tags':\n        return <FilterBlock blockTitle=\"Tags\" filterName=\"Tags\" labelBy=\"Tag\" filterItems={this.props.filters.tags}></FilterBlock>\n      case 'languages':\n        return <FilterBlock blockTitle=\"Languages\" filterName=\"Language\" labelBy=\"Language\" filterItems={this.props.filters.languages}></FilterBlock>\n      case 'countries':\n        return <FilterBlock blockTitle=\"Countries\" filterName=\"Country\" labelBy=\"Country\" filterItems={this.props.filters.countries}></FilterBlock>\n      case 'locations':\n        return <FilterBlock blockTitle=\"Locations\" filterName=\"Location\" labelBy=\"City\" filterItems={this.props.filters.cities}></FilterBlock>\n      case 'dates':\n        return <FilterDates></FilterDates>\n      default:\n        return <div></div>\n    }\n\n  }\n\n\n  render() {\n    return <div className=\"sidebar-container\">\n        <div className=\"primary-sidebar\">\n          <div className=\"sidebar-title\">Filters</div>\n          {\n          filtersList.map(t =>\n            <div\n              className={`filter-type ${this.state.currentFilterPanel === t.key ? \"active\" : \" \"}`} \n              onClick={() => this.setFilterPanel(t.key)}\n            >\n              {t.label}\n              <div className=\"arrow-icon\" style={{ backgroundImage: `url(${arrowIcon})` }}></div>\n            </div>\n          )\n          }\n          <ResetFilter></ResetFilter>\n        </div>\n        <FilterSecondarySidebar open={this.state.showSideMenu} width=\"250\"\n        title={this.state.currentFilterPanel ? filtersList.find(e => e.key === this.state.currentFilterPanel).label : ''}\n        onClose={() => {\n          this.setShowSideMenu(false)\n          this.setFilterPanel(false)\n        }}\n        children={\n          this.currentFilterContent()\n        }>\n        </FilterSecondarySidebar>\n      </div>\n  }\n}\n\nconst ResetFilter = ({filters}) =>{\n  const history = useHistory();\n\n  function handleClick() {\n    history.push(\"/explore\")\n  }\n\n  return (\n    <div className=\"reset-filter\" onClick={handleClick}>\n      <div className=\"icon\" style={{ backgroundImage: `url(${resetIcon})` }}></div>\n      Reset filter\n    </div>\n    )\n}","import { useQueryParam, ArrayParam } from 'use-query-params';\nimport moment from 'moment'\n\nconst CurrentFiltersRecap = ({filterKey}) => {\n  const [params, setFilterValue] = useQueryParam(filterKey, ArrayParam);\n\n  const paramsArray = params || []\n\n  const onRemove = (value) => {\n    if(paramsArray.includes(value)){\n      paramsArray.splice(paramsArray.indexOf(value), 1)\n    }\n    setFilterValue(paramsArray)\n  }\n\n  return paramsArray.map(value => {\n    let displayValue = value\n    if (filterKey.indexOf('date') >= 0 && moment(+value).isValid()) {\n      displayValue = moment(+value).format('MM/YYYY')\n    }\n    return <div className=\"filter-recap-item\" onClick={() => onRemove(value)}>{displayValue} <span>X</span></div>\n  }\n  )\n}\n\nexport default CurrentFiltersRecap;","import * as React from 'react';\nimport { useQueryParam, StringParam } from 'use-query-params';\n\nconst FilterSeach = (props) => {\n  const [seachQ, setFilterValue] = useQueryParam('search', StringParam);\n\n\n  const onChange = (value) => {\n    setFilterValue(value)\n  }\n\n  return (\n    <input type=\"text\" \n      placeholder=\"search\" value={seachQ}\n      onChange={(e) => onChange(e.target.value)}></input>\n  );\n};\n\nexport default FilterSeach;","export default __webpack_public_path__ + \"static/media/rectangle.dada3c21.svg\";","export default __webpack_public_path__ + \"static/media/rectangle-active.b4287a0a.svg\";","export default __webpack_public_path__ + \"static/media/list.c092c90e.svg\";","export default __webpack_public_path__ + \"static/media/list-active.5020de5f.svg\";","export default __webpack_public_path__ + \"static/media/circle.d4d761f1.svg\";","export default __webpack_public_path__ + \"static/media/circle-active.3bfe5508.svg\";","import {Component} from 'react'\nimport './ExploreView.sass';\nimport {Spinner} from 'react-bootstrap'\nimport ResourcesGrid from '../components/ResourcesGrid'\nimport ResourcesList from '../components/ResourcesList'\nimport ResourcesMap from '../components/ResourcesMap'\n\nimport FilterSidebar from '../components/FilterSidebar'\nimport CurrentFiltersRecap from '../components/CurrentFiltersRecap'\nimport FilterSearch from '../components/FilterSearch'\nimport rectIcon from '../assets/rectangle.svg';\nimport rectIconActive from '../assets/rectangle-active.svg';\nimport listIcon from '../assets/list.svg';\nimport listIconActive from '../assets/list-active.svg';\nimport circleIcon from '../assets/circle.svg';\nimport circleIconActive from '../assets/circle-active.svg';\nimport moment from 'moment';\n\nimport {base, MAIN_TABLE} from '../utils/airtable'\n\n\nexport default class ExploreView extends Component {\n  state = {\n\t\tarchiveItems: [],\n    loading: false,\n    currentViewType: 'grid'\n\t}\n  componentDidMount() {\n    this.fetchData()\n  }\n  componentDidUpdate(prevProps) {\n    if (JSON.stringify(prevProps.params) !== JSON.stringify(this.props.params)) {\n      this.fetchData()\n    }\n  }\n  setCurrentViewType(type) {\n    this.setState({\n      currentViewType: type\n    })\n  }\n  fetchData () {\n    var self = this\n    self.setState({\n      loading: true\n    });\n\n    let formulas = []\n\n    this.props.params && Object.keys(this.props.params).forEach(paramKey => {\n      if(paramKey === 'search') {\n        formulas.push('OR(FIND(LOWER(\"'+ this.props.params[paramKey] + '\"), LOWER({Summary (limit 500)})), '+\n        'FIND(LOWER(\"'+ this.props.params[paramKey] + '\"), LOWER({Title ID})))')\n\n      } else if(paramKey === 'dateFrom' && moment(+this.props.params[paramKey]).isValid()) {\n        formulas.push('OR(IS_AFTER({Production date}, \"'+moment(+this.props.params[paramKey]).format('YYYY-MM-DD')+'\"))')\n      \n      } else if(paramKey === 'dateTo' && moment(+this.props.params[paramKey]).isValid()) {\n        formulas.push('OR(IS_BEFORE({Production date}, \"'+moment(+this.props.params[paramKey]).format('YYYY-MM-DD')+'\"))')\n      \n      } else {\n        let filterVal = Array.isArray(this.props.params[paramKey]) ? this.props.params[paramKey] : [this.props.params[paramKey]]\n        formulas.push('OR(' + filterVal.map(v => 'FIND(\"'+v+'\",{' + paramKey + '})').join(', ') +')')\n      }\n    })\n    formulas.push('REGEX_MATCH({Status}, \"Published\")')\n    let formula = formulas.length > 0 ? 'AND(' + formulas.join(', ') +')' : ''\n    \n    let allRecords = []\n    //OR(RECORD_ID() = ‘recRjdJSziwMjfhO8’, RECORD_ID() = ‘recdRonUzKAIMPOxb’)\n    base(MAIN_TABLE).select({\n        view: 'Table',\n        filterByFormula: formula\n    }).eachPage(function page(records, fetchNextPage) {\n        allRecords = allRecords.concat(records)\n        fetchNextPage();\n    }, function done(err) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          loading: false,\n          archiveItems: allRecords,\n        })\n    });\n  }\n  renderParamsRecap () {\n    return Object.keys(this.props.params)\n      .filter(filterKey => filterKey != 'search')\n      .map(filterKey =>\n        <CurrentFiltersRecap filterKey={filterKey}></CurrentFiltersRecap>\n      )\n  }\n  renderCurrentViewType () {\n    switch(this.state.currentViewType) {\n      case 'grid':\n        return <ResourcesGrid archiveItems={this.state.archiveItems}></ResourcesGrid>\n      case 'list':\n        return <ResourcesList archiveItems={this.state.archiveItems}></ResourcesList>\n      case 'map':\n        return <ResourcesMap archiveItems={this.state.archiveItems}></ResourcesMap>\n      default:\n        return <div></div>\n    }\n  }\n  render() {\n    return <div className=\"explore-view\">\n            <div className=\"sidebar\">\n              <FilterSidebar filters={this.props.filters}></FilterSidebar>\n            </div>\n            <div className=\"main-content\">\n              <div className=\"content-top-bar\">\n                <div className=\"results-count\">Results: {this.state.archiveItems.length}</div>\n                <div className=\"results-view-type\">\n                  <div className={`view-type grid`} onClick={() => this.setCurrentViewType('grid')} style={{ backgroundImage: this.state.currentViewType === 'grid' ? `url(${rectIconActive})`: `url(${rectIcon})` }}></div>\n                  <div className={`view-type list`} onClick={() => this.setCurrentViewType('list')} style={{ backgroundImage: this.state.currentViewType === 'list' ? `url(${listIconActive})` : `url(${listIcon})`}}></div>\n                  <div className={`view-type map`} onClick={() => this.setCurrentViewType('map')} style={{ backgroundImage: this.state.currentViewType === 'map' ? `url(${circleIconActive})` : `url(${circleIcon})`}}></div>\n                </div>\n                <div className=\"results-seach\">\n                  <FilterSearch></FilterSearch>\n                </div>\n              </div>\n              {this.props.params &&\n                <div className=\"content-filters-summary\">\n                  {this.renderParamsRecap()}\n                </div>\n              }\n              {this.state.loading ? \n                <div className=\"loading\"><Spinner animation=\"border\" />Loading resources</div>\n                  :\n                  this.renderCurrentViewType()\n            }\n            </div>\n          </div>\n  }\n}","import {Component} from 'react'\nimport './AboutView.sass';\n\n\nexport default class HomeView extends Component {\n  render() {\n    return <div className=\"about-view\">\n            about\n          </div>\n  }\n}","import React, { useEffect, useState } from \"react\";\nimport './CollectionView.sass';\nimport {useCollection} from '../utils/collection'\nimport ResourceExtendedInfo from '../components/ResourceExtendedInfo'\nimport { CSVLink } from \"react-csv\";\nimport * as Papa from 'papaparse'\nimport collectionIconAdd from '../assets/collection-add.svg';\n\nconst CollectionView = () => {\n  const [collection] = useCollection()\n\n  const csvData = Papa.unparse(collection.map(item => item.fields))\n\n  return (\n    <div className=\"collection-view\">\n      <div className=\"collection-header\">\n        <h2>Items Collected</h2>\n        <CSVLink data={csvData} filename={\"ISCHE-collection.csv\"} className=\"export-link\">Export list</CSVLink>\n      </div>\n      <div className=\"collection-grid\">\n      {\n        collection.map(resource =>\n          <ResourceExtendedInfo resource={resource}></ResourceExtendedInfo>\n        )\n      }\n      </div>\n      {\n        collection.length == 0 && (\n          <div className=\"empty-collection\">\n            Your collections is empty.<br/>\n            Click on <img src={collectionIconAdd}></img> to save items here. \n          </div>\n        )\n      }\n    </div>\n  )\n}\n\nexport default CollectionView","export default __webpack_public_path__ + \"static/media/logo.65b2bc4b.svg\";","export default __webpack_public_path__ + \"static/media/collection.9ba941c0.svg\";","export default __webpack_public_path__ + \"static/media/collection-full.2832ecdb.svg\";","import * as React from 'react';\nimport logo from '../assets/logo.svg';\nimport {Link, NavLink} from 'react-router-dom'\nimport './Header.sass'\nimport {useCollection} from '../utils/collection'\n\nimport collectionIcon from '../assets/collection.svg';\nimport collectionIconFull from '../assets/collection-full.svg';\n\n\nconst Header = () => {\n  let CollectionCount = () => {\n    const [collection] = useCollection()\n    const count = collection.length\n    return <NavLink activeClassName=\"active\" to=\"/collection\" className=\"header-link\">\n              <div className=\"collection-icon\" style={{ backgroundImage: count > 0 ? `url(${collectionIconFull})`: `url(${collectionIcon})` }}></div>\n              {count}\n          </NavLink>\n  }\n\n  return (\n      <div className=\"header\">\n        <Link to=\"/\"><img src={logo} alt=\"logo\"/></Link>\n        <div className=\"header-links\">\n          <NavLink to=\"/explore\" activeClassName=\"active\" className=\"header-link\">Explore</NavLink>\n          <NavLink to=\"/about\" activeClassName=\"active\" className=\"header-link\">About</NavLink>\n          <a href=\"#\" className=\"header-link\">Submit</a>\n          <CollectionCount />\n        </div>\n      </div>\n  );\n};\n\nexport default Header;","import './App.sass';\nimport './components/CustomSelect.sass';\n\nimport {Component} from 'react'\nimport HomeView from './views/HomeView'\nimport ResourceView from './views/ResourceView'\nimport ExploreView from './views/ExploreView'\nimport AboutView from './views/AboutView'\nimport CollectionView from './views/CollectionView'\n\nimport Header from './components/Header'\nimport {CollectionProvider} from './utils/collection'\n\nimport qs from 'qs'\n\nimport {base} from './utils/airtable'\n\nimport mapboxgl from \"mapbox-gl\";\n\nimport {\n  Switch,\n  Route,\n  withRouter,\n  Redirect\n} from \"react-router-dom\";\n\nimport { QueryParamProvider } from 'use-query-params';\n\n// @ts-ignore\n// eslint-disable-next-line import/no-webpack-loader-syntax, import/no-unresolved\nmapboxgl.workerClass = require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\n\n\nclass App extends Component {\n\tstate = {\n\t\ttypes: [],\n    pandemics: [],\n    languages: [],\n    tags: [],\n    countries: [],\n    themes: [],\n    cities: []\n\t}\n  componentDidMount() {\n    var self = this\n\n    base('Type list').select({\n        view: 'Grid view',\n        filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n\t\t\t\t\ttypes: data\n\t\t\t\t});\n    });\n    base('Pandemic list').select({\n        view: 'Grid view',\n        filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          pandemics: data\n        });\n    });\n    base('Language list').select({\n      view: 'Grid view',\n      filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          languages: data\n        });\n    });\n    base('Tag list').select({\n      view: 'Grid view',\n      filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          tags: data\n        });\n    });\n    base('Countries List').select({\n      view: 'Grid view',\n      filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          countries: data\n        });\n    });\n    base('Themes list').select({\n      view: 'Grid view',\n      filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          themes: data\n        });\n    });\n    base('Location List').select({\n      view: 'Grid view',\n      filterByFormula: '{Count}>0'\n    }).firstPage(function(err, data) {\n        if (err) { console.error(err); return; }\n        self.setState({\n          cities: data\n        });\n    });\n  }\n  render() {\n    return (\n        <QueryParamProvider ReactRouterRoute={Route}>\n          <CollectionProvider>\n\n            <div className=\"App\">\n              {\n                this.props.location.pathname !=='/' ? <Header/>:null\n              }\n              <div className=\"app-content\">\n                <Switch>\n                  <Route exact path=\"/explore/resource/:resourceId\" render={(props)=>{\n                    return <ResourceView resourceId={props.match.params.resourceId}/>\n                  }} />\n                  <Route path=\"/explore\" render={(props) => {\n                      let urlParams = qs.parse(props.location.search.slice(1))\n                      return  <ExploreView filters={this.state} params={urlParams}></ExploreView>\n                    }}/>\n                  <Route path=\"/about\" render={() => {\n                      return  <AboutView></AboutView>\n                    }}/>\n                  <Route path=\"/collection\" render={() => {\n                      return  <CollectionView></CollectionView>\n                    }}/>\n                  <Route exact path=\"/\" render={() => {\n                      return  <HomeView></HomeView>\n                    }}/>\n                  <Route path=\"/\">\n                      <Redirect to=\"/\"/>\n                  </Route>\n                </Switch>\n              </div>\n            </div>\n          </CollectionProvider>\n        </QueryParamProvider>\n    );\n  }\n}\n\n\nexport default withRouter(App);\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {HashRouter as Router} from 'react-router-dom'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}